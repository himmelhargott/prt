function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(e){return e&&e.__esModule?e.default:e}var r,o,s,i,a={},c={},u=t.parcelRequire94c2;null==u&&((u=function(e){if(e in a)return a[e].exports;if(e in c){var t=c[e];delete c[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){c[e]=t},t.parcelRequire94c2=u),u.register("27Lyk",(function(t,n){var r,o;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var s={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)s[t[n]]=e[t[n]]},o=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),u.register("eWPSJ",(function(e,t){var n=e.exports&&e.exports.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TokenSigner=e.exports.createUnsecuredToken=void 0;var r=u("791Yx"),o=u("dLPMj"),s=u("6E2Fs"),i=u("ibZ5g");function a(e,t){const n=[],o=r.encode(JSON.stringify(t));n.push(o);const s=r.encode(JSON.stringify(e));n.push(s);return n.join(".")}e.exports.createUnsecuredToken=function(e){return a(e,{typ:"JWT",alg:"none"})+"."};e.exports.TokenSigner=class{constructor(e,t){if(!e||!t)throw new s.MissingParametersError("a signing algorithm and private key are required");if("string"!=typeof e)throw new Error("signing algorithm parameter must be a string");if(e=e.toUpperCase(),!o.cryptoClients.hasOwnProperty(e))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=o.cryptoClients[e],this.rawPrivateKey=t}header(e={}){const t={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},t,e)}sign(e,t=!1,n={}){const r=this.header(n),o=a(e,r),s=(0,i.hashSha256)(o);return this.createWithSignedHash(e,t,r,o,s)}signAsync(e,t=!1,r={}){return n(this,void 0,void 0,(function*(){const n=this.header(r),o=a(e,n),s=yield(0,i.hashSha256Async)(o);return this.createWithSignedHash(e,t,n,o,s)}))}createWithSignedHash(e,t,n,o,s){const i=this.cryptoClient.signHash(s,this.rawPrivateKey);if(t){return{header:[r.encode(JSON.stringify(n))],payload:JSON.stringify(e),signature:[i]}}return[o,i].join(".")}}})),u.register("791Yx",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decode=e.exports.encode=e.exports.unescape=e.exports.escape=e.exports.pad=void 0;var n=u("kuxul");function r(e){return`${e}${"=".repeat(4-(e.length%4||4))}`}function o(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(e){return r(e).replace(/-/g,"+").replace(/_/g,"/")}e.exports.pad=r,e.exports.escape=o,e.exports.unescape=s,e.exports.encode=function(e){return o((0,n.fromByteArray)((new TextEncoder).encode(e)))},e.exports.decode=function(e){return(new TextDecoder).decode((0,n.toByteArray)(r(s(e))))}})),u.register("kuxul",(function(t,n){var r,o;e(t.exports,"toByteArray",(()=>r),(e=>r=e)),e(t.exports,"fromByteArray",(()=>o),(e=>o=e)),r=function(e){var t,n,r=l(e),o=r[0],s=r[1],c=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),u=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},o=function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,c=n-r;a<c;a+=i)o.push(d(e,a,a+i>c?c:a+i));1===r?(t=e[n-1],o.push(s[t>>2]+s[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return o.join("")};for(var s=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0;u<64;++u)s[u]=c[u],i[c.charCodeAt(u)]=u;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(s[(o=r)>>18&63]+s[o>>12&63]+s[o>>6&63]+s[63&o]);return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63})),u.register("dLPMj",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.cryptoClients=e.exports.SECP256K1Client=void 0;var n=u("euNvR");Object.defineProperty(e.exports,"SECP256K1Client",{enumerable:!0,get:function(){return n.SECP256K1Client}});const r={ES256K:n.SECP256K1Client};e.exports.cryptoClients=r})),u.register("euNvR",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SECP256K1Client=void 0;var n=u("70Xw9"),r=u("6XnWx"),o=u("7Rh2L"),s=u("hPszO"),i=u("6E2Fs"),a=u("3Bcdj");o.utils.hmacSha256Sync=(e,...t)=>{const o=n.hmac.create(r.sha256,e);return t.forEach((e=>o.update(e))),o.digest()};class c{static derivePublicKey(e,t=!0){return 66===e.length&&(e=e.slice(0,64)),e.length<64&&(e=e.padStart(64,"0")),(0,a.bytesToHex)(o.getPublicKey(e,t))}static signHash(e,t,n="jose"){if(!e||!t)throw new i.MissingParametersError("a signing input hash and private key are all required");const r=o.signSync(e,t.slice(0,64),{der:!0,canonical:!1});if("der"===n)return(0,a.bytesToHex)(r);if("jose"===n)return(0,s.derToJose)(r,"ES256");throw Error("Invalid signature format")}static loadSignature(e){return(0,s.joseToDer)(e,"ES256")}static verifyHash(e,t,n){if(!e||!t||!n)throw new i.MissingParametersError("a signing input hash, der signature, and public key are all required");return o.verify(t,e,n,{strict:!1})}}e.exports.SECP256K1Client=c,c.algorithmName="ES256K"})),u.register("70Xw9",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hmac=void 0;var n=u("dNiq9"),r=u("3Bcdj");class o extends r.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,n.default.hash(e);const o=(0,r.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(o.length>s?e.create().update(o).digest():o);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return n.default.exists(this),this.iHash.update(e),this}digestInto(e){n.default.exists(this),n.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:s,outputLen:i}=this;return e.finished=r,e.destroyed=o,e.blockLen=s,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.exports.hmac=(e,t,n)=>new o(e,t).update(n).digest(),e.exports.hmac.create=(e,t)=>new o(e,t)})),u.register("dNiq9",(function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.output=e.exports.exists=e.exports.hash=e.exports.bytes=e.exports.bool=e.exports.number=void 0,e.exports.number=n,e.exports.bool=r,e.exports.bytes=o,e.exports.hash=s,e.exports.exists=i,e.exports.output=a;const c={number:n,bool:r,bytes:o,hash:s,exists:i,output:a};e.exports.default=c})),u.register("3Bcdj",(function(e,t){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=e.exports.wrapConstructorWithOpts=e.exports.wrapConstructor=e.exports.checkOpts=e.exports.Hash=e.exports.concatBytes=e.exports.toBytes=e.exports.utf8ToBytes=e.exports.asyncLoop=e.exports.nextTick=e.exports.hexToBytes=e.exports.bytesToHex=e.exports.isLE=e.exports.rotr=e.exports.createView=e.exports.u32=e.exports.u8=void 0;var n=u("2LMAo");e.exports.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.exports.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.exports.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.exports.rotr=(e,t)=>e<<32-t|e>>>t,e.exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.exports.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.exports.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.exports.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t};function o(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function s(e){if("string"==typeof e&&(e=o(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}e.exports.nextTick=async()=>{},e.exports.asyncLoop=async function(t,n,r){let o=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-o;t>=0&&t<n||(await(0,e.exports.nextTick)(),o+=t)}},e.exports.utf8ToBytes=o,e.exports.toBytes=s,e.exports.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n};e.exports.Hash=class{clone(){return this._cloneInto()}};e.exports.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new TypeError("Options should be object or undefined");var n;return Object.assign(e,t)},e.exports.wrapConstructor=function(e){const t=t=>e().update(s(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.exports.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.exports.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}})),u.register("2LMAo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.crypto=void 0,e.exports.crypto={node:void 0,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0}})),u.register("6XnWx",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha224=e.exports.sha256=void 0;var n=u("g9W9K"),r=u("3Bcdj");const o=(e,t,n)=>e&t^e&n^t&n,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|i[0],this.B=0|i[1],this.C=0|i[2],this.D=0|i[3],this.E=0|i[4],this.F=0|i[5],this.G=0|i[6],this.H=0|i[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:s,G:i,H:a}=this;return[e,t,n,r,o,s,i,a]}set(e,t,n,r,o,s,i,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|s,this.G=0|i,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)a[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],n=a[e-2],o=(0,r.rotr)(t,7)^(0,r.rotr)(t,18)^t>>>3,s=(0,r.rotr)(n,17)^(0,r.rotr)(n,19)^n>>>10;a[e]=s+a[e-7]+o+a[e-16]|0}let{A:n,B:i,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,r.rotr)(l,6)^(0,r.rotr)(l,11)^(0,r.rotr)(l,25))+((p=l)&d^~p&h)+s[e]+a[e]|0,y=((0,r.rotr)(n,2)^(0,r.rotr)(n,13)^(0,r.rotr)(n,22))+o(n,i,c)|0;f=h,h=d,d=l,l=u+t|0,u=c,c=i,i=n,n=t+y|0}var p;n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,i,c,u,l,d,h,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.exports.sha256=(0,r.wrapConstructor)((()=>new c)),e.exports.sha224=(0,r.wrapConstructor)((()=>new l))})),u.register("g9W9K",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SHA2=void 0;var n=u("dNiq9"),r=u("3Bcdj");class o extends r.Hash{constructor(e,t,n,o){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,r.createView)(this.buffer)}update(e){n.default.exists(this);const{view:t,buffer:o,blockLen:s}=this,i=(e=(0,r.toBytes)(e)).length;for(let n=0;n<i;){const a=Math.min(s-this.pos,i-n);if(a!==s)o.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,r.createView)(e);for(;s<=i-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){n.default.exists(this),n.default.output(e,this),this.finished=!0;const{buffer:t,view:o,blockLen:s,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(o,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}(o,s-8,BigInt(8*this.length),i),this.process(o,0);const c=(0,r.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:s,pos:i}=this;return e.length=r,e.pos=i,e.finished=o,e.destroyed=s,r%t&&e.buffer.set(n),e}}e.exports.SHA2=o})),u.register("7Rh2L",(function(t,n){e(t.exports,"Point",(()=>C)),e(t.exports,"Signature",(()=>k)),e(t.exports,"utils",(()=>fe)),e(t.exports,"getPublicKey",(()=>ee)),e(t.exports,"getSharedSecret",(()=>ne)),e(t.exports,"signSync",(()=>ce)),e(t.exports,"verify",(()=>le));
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
var r=u("kjyEk");const o=BigInt(0),s=BigInt(1),i=BigInt(2),a=BigInt(3),c=BigInt(8),l=Object.freeze({a:o,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),d=(e,t)=>(e+t/i)/t,h={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=l,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),c=d(i*e,t),u=d(-r*e,t);let h=M(e-c*n-u*o,t),f=M(-c*r-u*i,t);const p=h>a,y=f>a;if(p&&(h=t-h),y&&(f=t-f),h>a||f>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:p,k1:h,k2neg:y,k2:f}}},f=32,p=32,y=32,g=f+1,m=2*f+1;function w(e){const{a:t,b:n}=l,r=M(e*e),o=M(r*e);return M(o+t*e+n)}const b=l.a===o;class v extends Error{constructor(e){super(e)}}function x(e){if(!(e instanceof E))throw new TypeError("JacobianPoint expected")}class E{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof C))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(C.ZERO)?E.ZERO:new E(e.x,e.y,s)}static toAffineBatch(e){const t=function(e,t=l.P){const n=new Array(e.length),r=K(e.reduce(((e,r,s)=>r===o?e:(n[s]=e,M(e*r,t))),s),t);return e.reduceRight(((e,r,s)=>r===o?e:(n[s]=M(e*n[s],t),M(e*r,t))),r),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return E.toAffineBatch(e).map(E.fromAffine)}equals(e){x(e);const{x:t,y:n,z:r}=this,{x:o,y:s,z:i}=e,a=M(r*r),c=M(i*i),u=M(t*c),l=M(o*a),d=M(M(n*i)*c),h=M(M(s*r)*a);return u===l&&d===h}negate(){return new E(this.x,M(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,r=M(e*e),o=M(t*t),s=M(o*o),u=e+o,l=M(i*(M(u*u)-r-s)),d=M(a*r),h=M(d*d),f=M(h-i*l),p=M(d*(l-f)-c*s),y=M(i*t*n);return new E(f,p,y)}add(e){x(e);const{x:t,y:n,z:r}=this,{x:s,y:a,z:c}=e;if(s===o||a===o)return this;if(t===o||n===o)return e;const u=M(r*r),l=M(c*c),d=M(t*l),h=M(s*u),f=M(M(n*c)*l),p=M(M(a*r)*u),y=M(h-d),g=M(p-f);if(y===o)return g===o?this.double():E.ZERO;const m=M(y*y),w=M(y*m),b=M(d*m),v=M(g*g-w-i*b),S=M(g*(b-v)-f*w),A=M(r*c*y);return new E(v,S,A)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=E.ZERO;if("bigint"==typeof e&&e===o)return t;let n=H(e);if(n===s)return this;if(!b){let e=t,r=this;for(;n>o;)n&s&&(e=e.add(r)),r=r.double(),n>>=s;return e}let{k1neg:r,k1:i,k2neg:a,k2:c}=h.splitScalar(n),u=t,l=t,d=this;for(;i>o||c>o;)i&s&&(u=u.add(d)),c&s&&(l=l.add(d)),d=d.double(),i>>=s,c>>=s;return r&&(u=u.negate()),a&&(l=l.negate()),l=new E(M(l.x*h.beta),l.y,l.z),u.add(l)}precomputeWindow(e){const t=b?128/e+1:256/e+1,n=[];let r=this,o=r;for(let s=0;s<t;s++){o=r,n.push(o);for(let t=1;t<2**(e-1);t++)o=o.add(r),n.push(o);r=o.double()}return n}wNAF(e,t){!t&&this.equals(E.BASE)&&(t=C.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&A.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=E.normalizeZ(r),A.set(t,r)));let o=E.ZERO,i=E.BASE;const a=1+(b?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let t=0;t<a;t++){const n=t*c;let a=Number(e&u);e>>=d,a>c&&(a-=l,e+=s);const h=n,f=n+Math.abs(a)-1,p=t%2!=0,y=a<0;0===a?i=i.add(S(p,r[h])):o=o.add(S(y,r[f]))}return{p:o,f:i}}multiply(e,t){let n,r,o=H(e);if(b){const{k1neg:e,k1:s,k2neg:i,k2:a}=h.splitScalar(o);let{p:c,f:u}=this.wNAF(s,t),{p:l,f:d}=this.wNAF(a,t);c=S(e,c),l=S(i,l),l=new E(M(l.x*h.beta),l.y,l.z),n=c.add(l),r=u.add(d)}else{const{p:e,f:s}=this.wNAF(o,t);n=e,r=s}return E.normalizeZ([n,r])[0]}toAffine(e){const{x:t,y:n,z:r}=this,o=this.equals(E.ZERO);null==e&&(e=o?c:K(r));const i=e,a=M(i*i),u=M(a*i),l=M(t*a),d=M(n*u),h=M(r*i);if(o)return C.ZERO;if(h!==s)throw new Error("invZ was invalid");return new C(l,d)}}function S(e,t){const n=t.negate();return e?n:t}E.BASE=new E(l.Gx,l.Gy,s),E.ZERO=new E(o,s,o);const A=new WeakMap;class C{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,A.delete(this)}hasEvenY(){return this.y%i===o}static fromCompressedHex(e){const t=32===e.length,n=D(t?e:e.subarray(1));if(!J(n))throw new Error("Point is not on curve");let r=function(e){const{P:t}=l,n=BigInt(6),r=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,h=d*d*e%t,f=F(h,a)*h%t,p=F(f,a)*h%t,y=F(p,i)*d%t,g=F(y,r)*y%t,m=F(g,o)*g%t,w=F(m,c)*m%t,b=F(w,u)*w%t,v=F(b,c)*m%t,x=F(v,a)*h%t,E=F(x,s)*g%t,S=F(E,n)*d%t,A=F(S,i);if(A*A%t!==e)throw new Error("Cannot find square root");return A}(w(n));const o=(r&s)===s;if(t)o&&(r=M(-r));else{1==(1&e[0])!==o&&(r=M(-r))}const c=new C(n,r);return c.assertValidity(),c}static fromUncompressedHex(e){const t=D(e.subarray(1,f+1)),n=D(e.subarray(f+1,2*f+1)),r=new C(t,n);return r.assertValidity(),r}static fromHex(e){const t=R(e),n=t.length,r=t[0];if(n===f)return this.fromCompressedHex(t);if(n===g&&(2===r||3===r))return this.fromCompressedHex(t);if(n===m&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${g} compressed bytes or ${m} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return C.BASE.multiply(Y(e))}static fromSignature(e,t,n){const{r:r,s:o}=Q(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const s=z(R(e)),{n:i}=l,a=2===n||3===n?r+i:r,c=K(a,i),u=M(-s*c,i),d=M(o*c,i),h=1&n?"03":"02",f=C.fromHex(h+_(a)),p=C.BASE.multiplyAndAddUnsafe(f,u,d);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return L(this.toHex(e))}toHex(e=!1){const t=_(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${_(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!J(t)||!J(n))throw new Error(e);const r=M(n*n);if(M(r-w(t))!==o)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new C(this.x,M(-this.y))}double(){return E.fromAffine(this).double().toAffine()}add(e){return E.fromAffine(this).add(E.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return E.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const r=E.fromAffine(this),i=t===o||t===s||this!==C.BASE?r.multiplyUnsafe(t):r.multiply(t),a=E.fromAffine(e).multiplyUnsafe(n),c=i.add(a);return c.equals(E.ZERO)?void 0:c.toAffine()}}function $(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function T(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${I(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:D(n),left:e.subarray(t+2)}}C.BASE=new C(l.Gx,l.Gy),C.ZERO=new C(o,o);class k{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=t?I(e):e;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new k(j(r.slice(0,64)),j(r.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${I(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=T(e.subarray(2)),{data:r,left:o}=T(n);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${I(o)}`);return{r:t,s:r}}(t?e:L(e));return new k(n,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!G(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!G(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=l.n>>s;return this.s>e}normalizeS(){return this.hasHighS()?new k(this.r,M(-this.s,l.n)):this}toDERRawBytes(){return L(this.toDERHex())}toDERHex(){const e=$(N(this.s)),t=$(N(this.r)),n=e.length/2,r=t.length/2,o=N(n),s=N(r);return`30${N(r+n+4)}02${s}${t}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return L(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}function P(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n}const B=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function I(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=B[e[n]];return t}const U=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function _(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(o<=e&&e<U))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function O(e){const t=L(_(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function N(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function j(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function L(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}function D(e){return j(I(e))}function R(e){return e instanceof Uint8Array?Uint8Array.from(e):L(e)}function H(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&G(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function M(e,t=l.P){const n=e%t;return n>=o?n:t+n}function F(e,t){const{P:n}=l;let r=e;for(;t-- >o;)r*=r,r%=n;return r}function K(e,t=l.P){if(e===o||t<=o)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=M(e,t),r=t,i=o,a=s,c=s,u=o;for(;n!==o;){const e=r/n,t=r%n,o=i-c*e,s=a-u*e;r=n,n=t,i=c,a=u,c=o,u=s}if(r!==s)throw new Error("invert: does not exist");return M(i,t)}function z(e,t=!1){const n=function(e){const t=8*e.length-8*p,n=D(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:r}=l;return n>=r?n-r:n}let V,W;class q{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return fe.hmacSha256(this.k,...e)}hmacSync(...e){return W(this.k,...e)}checkSync(){if("function"!=typeof W)throw new v("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return P(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return P(...t)}}function G(e){return o<e&&e<l.n}function J(e){return o<e&&e<l.P}function X(e,t,n,r=!0){const{n:i}=l,a=z(e,!0);if(!G(a))return;const c=K(a,i),u=C.BASE.multiply(a),d=M(u.x,i);if(d===o)return;const h=M(c*M(t+n*d,i),i);if(h===o)return;let f=new k(d,h),p=(u.x===f.r?0:2)|Number(u.y&s);return r&&f.hasHighS()&&(f=f.normalizeS(),p^=1),{sig:f,recovery:p}}function Y(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*p)throw new Error("Expected 32 bytes of private key");t=j(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==p)throw new Error("Expected 32 bytes of private key");t=D(e)}if(!G(t))throw new Error("Expected private key: 0 < key < n");return t}function Z(e){return e instanceof C?(e.assertValidity(),e):C.fromHex(e)}function Q(e){if(e instanceof k)return e.assertValidity(),e;try{return k.fromDER(e)}catch(t){return k.fromCompact(e)}}function ee(e,t=!1){return C.fromPrivateKey(e).toRawBytes(t)}function te(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===g||r===m:n?r===2*g||r===2*m:e instanceof C}function ne(e,t,n=!1){if(te(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!te(t))throw new TypeError("getSharedSecret: second arg must be public key");const r=Z(t);return r.assertValidity(),r.multiply(Y(e)).toRawBytes(n)}function re(e){return D(e.length>f?e.slice(0,f):e)}function oe(e){const t=re(e),n=M(t,l.n);return se(n<o?t:n)}function se(e){return O(e)}function ie(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const r=R(e),o=Y(t),s=[se(o),oe(r)];if(null!=n){!0===n&&(n=fe.randomBytes(f));const e=R(n);if(e.length!==f)throw new Error(`sign: Expected ${f} bytes of extra data`);s.push(e)}return{seed:P(...s),m:re(r),d:o}}function ae(e,t){const{sig:n,recovery:r}=e,{der:o,recovered:s}=Object.assign({canonical:!0,der:!0},t),i=o?n.toDERRawBytes():n.toCompactRawBytes();return s?[i,r]:i}function ce(e,t,n={}){const{seed:r,m:o,d:s}=ie(e,t,n.extraEntropy),i=new q(y,p);let a;for(i.reseedSync(r);!(a=X(i.generateSync(),o,s,n.canonical));)i.reseedSync();return ae(a,n)}const ue={strict:!0};function le(e,t,n,r=ue){let o;try{o=Q(e),t=R(t)}catch(e){return!1}const{r:s,s:i}=o;if(r.strict&&o.hasHighS())return!1;const a=z(t);let c;try{c=Z(n)}catch(e){return!1}const{n:u}=l,d=K(i,u),h=M(a*d,u),f=M(s*d,u),p=C.BASE.multiplyAndAddUnsafe(c,h,f);if(!p)return!1;return M(p.x,u)===s}C.BASE._setWindowSize(8);const de={node:r,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},he={},fe={bytesToHex:I,hexToBytes:L,concatBytes:P,mod:M,invert:K,isValidPrivateKey(e){try{return Y(e),!0}catch(e){return!1}},_bigintTo32Bytes:O,_normalizePrivateKey:Y,hashToPrivateKey:e=>{e=R(e);const t=p+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return O(M(D(e),l.n-s)+s)},randomBytes:(e=32)=>{if(de.web)return de.web.getRandomValues(new Uint8Array(e));if(de.node){const{randomBytes:t}=de.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>fe.hashToPrivateKey(fe.randomBytes(p+8)),precompute(e=8,t=C.BASE){const n=t===C.BASE?t:new C(t.x,t.y);return n._setWindowSize(e),n.multiply(a),n},sha256:async(...e)=>{if(de.web){const t=await de.web.subtle.digest("SHA-256",P(...e));return new Uint8Array(t)}if(de.node){const{createHash:t}=de.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(de.web){const n=await de.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=P(...t),o=await de.web.subtle.sign("HMAC",n,r);return new Uint8Array(o)}if(de.node){const{createHmac:n}=de.node,r=n("sha256",e);return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=he[e];if(void 0===n){const t=await fe.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=P(t,t),he[e]=n}return fe.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof V)throw new v("sha256Sync is undefined, you need to set it");let n=he[e];if(void 0===n){const t=V(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=P(t,t),he[e]=n}return V(n,...t)},_JacobianPoint:E};Object.defineProperties(fe,{sha256Sync:{configurable:!1,get:()=>V,set(e){V||(V=e)}},hmacSha256Sync:{configurable:!1,get:()=>W,set(e){W||(W=e)}}})})),u.register("kjyEk",(function(e,t){})),u.register("hPszO",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.joseToDer=e.exports.derToJose=void 0;var n=u("kuxul"),r=u("791Yx");function o(e){return(e/8|0)+(e%8==0?0:1)}const s={ES256:o(256),ES384:o(384),ES512:o(521)};function i(e){const t=s[e];if(t)return t;throw new Error(`Unknown algorithm "${e}"`)}const a=128,c=48,l=2;function d(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,n.toByteArray)((0,r.pad)(e));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function h(e,t,n){let r=0;for(;t+r<n&&0===e[t+r];)++r;return e[t+r]>=a&&--r,r}e.exports.derToJose=function(e,t){const o=d(e),s=i(t),u=s+1,h=o.length;let f=0;if(o[f++]!==c)throw new Error('Could not find expected "seq"');let p=o[f++];if(p===(1|a)&&(p=o[f++]),h-f<p)throw new Error(`"seq" specified length of "${p}", only "${h-f}" remaining`);if(o[f++]!==l)throw new Error('Could not find expected "int" for "r"');const y=o[f++];if(h-f-2<y)throw new Error(`"r" specified length of "${y}", only "${h-f-2}" available`);if(u<y)throw new Error(`"r" specified length of "${y}", max of "${u}" is acceptable`);const g=f;if(f+=y,o[f++]!==l)throw new Error('Could not find expected "int" for "s"');const m=o[f++];if(h-f!==m)throw new Error(`"s" specified length of "${m}", expected "${h-f}"`);if(u<m)throw new Error(`"s" specified length of "${m}", max of "${u}" is acceptable`);const w=f;if(f+=m,f!==h)throw new Error(`Expected to consume entire array, but "${h-f}" bytes remain`);const b=s-y,v=s-m,x=new Uint8Array(b+y+v+m);for(f=0;f<b;++f)x[f]=0;x.set(o.subarray(g+Math.max(-b,0),g+y),f),f=s;for(const e=f;f<e+v;++f)x[f]=0;return x.set(o.subarray(w+Math.max(-v,0),w+m),f),(0,r.escape)((0,n.fromByteArray)(x))},e.exports.joseToDer=function(e,t){e=d(e);const n=i(t),r=e.length;if(r!==2*n)throw new TypeError(`"${t}" signatures must be "${2*n}" bytes, saw "${r}"`);const o=h(e,0,n),s=h(e,n,e.length),u=n-o,f=n-s,p=2+u+1+1+f,y=p<a,g=new Uint8Array((y?2:3)+p);let m=0;return g[m++]=c,y?g[m++]=p:(g[m++]=1|a,g[m++]=255&p),g[m++]=l,g[m++]=u,o<0?(g[m++]=0,g.set(e.subarray(0,n),m),m+=n):(g.set(e.subarray(o,n),m),m+=n-o),g[m++]=l,g[m++]=f,s<0?(g[m++]=0,g.set(e.subarray(n),m)):g.set(e.subarray(n+s),m),g}})),u.register("6E2Fs",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.InvalidTokenError=e.exports.MissingParametersError=void 0;class n extends Error{constructor(e){super(),this.name="MissingParametersError",this.message=e||""}}e.exports.MissingParametersError=n;class r extends Error{constructor(e){super(),this.name="InvalidTokenError",this.message=e||""}}e.exports.InvalidTokenError=r})),u.register("ibZ5g",(function(e,t){var n=e.exports&&e.exports.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hashSha256Async=e.exports.hashSha256=void 0;var r=u("6XnWx");function o(e){return(0,r.sha256)(e)}e.exports.hashSha256=o,e.exports.hashSha256Async=function(e){return n(this,void 0,void 0,(function*(){try{if("undefined"!=typeof crypto&&void 0!==crypto.subtle){const t="string"==typeof e?(new TextEncoder).encode(e):e,n=yield crypto.subtle.digest("SHA-256",t);return new Uint8Array(n)}{const t=u("kjyEk");if(!t.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(t.createHash("sha256").update(e).digest())}}catch(t){return console.log(t),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(o(e))}}))}})),u.register("hyBmL",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TokenVerifier=void 0;var n=u("791Yx"),r=u("dLPMj"),o=u("6E2Fs"),s=u("ibZ5g");e.exports.TokenVerifier=class{constructor(e,t){if(!e||!t)throw new o.MissingParametersError("a signing algorithm and public key are required");if("string"!=typeof e)throw"signing algorithm parameter must be a string";if(e=e.toUpperCase(),!r.cryptoClients.hasOwnProperty(e))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=r.cryptoClients[e],this.rawPublicKey=t}verify(e){return"string"==typeof e?this.verifyCompact(e,!1):"object"==typeof e&&this.verifyExpanded(e,!1)}verifyAsync(e){return"string"==typeof e?this.verifyCompact(e,!0):"object"==typeof e?this.verifyExpanded(e,!0):Promise.resolve(!1)}verifyCompact(e,t){const n=e.split("."),r=n[0]+"."+n[1],o=e=>{const t=this.cryptoClient.loadSignature(n[2]);return this.cryptoClient.verifyHash(e,t,this.rawPublicKey)};if(t)return(0,s.hashSha256Async)(r).then((e=>o(e)));{const e=(0,s.hashSha256)(r);return o(e)}}verifyExpanded(e,t){const r=[e.header.join("."),n.encode(e.payload)].join(".");let o=!0;const i=t=>(e.signature.map((e=>{const n=this.cryptoClient.loadSignature(e);this.cryptoClient.verifyHash(t,n,this.rawPublicKey)||(o=!1)})),o);if(t)return(0,s.hashSha256Async)(r).then((e=>i(e)));{const e=(0,s.hashSha256)(r);return i(e)}}}})),u.register("3m48P",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeToken=void 0;var n=u("791Yx");e.exports.decodeToken=function(e){if("string"==typeof e){const t=e.split(".");return{header:JSON.parse(n.decode(t[0])),payload:JSON.parse(n.decode(t[1])),signature:t[2]}}if("object"==typeof e){if("string"!=typeof e.payload)throw new Error("Expected token payload to be a base64 or json string");let t=e.payload;"{"!==e.payload[0]&&(t=n.decode(t));const r=[];return e.header.map((e=>{const t=JSON.parse(n.decode(e));r.push(t)})),{header:r,payload:JSON.parse(t),signature:e.signature}}}})),u.register("lnboJ",(function(e,n){var r="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",i="[object Boolean]",a="[object Date]",c="[object Function]",u="[object GeneratorFunction]",l="[object Map]",d="[object Number]",h="[object Object]",f="[object Promise]",p="[object RegExp]",y="[object Set]",g="[object String]",m="[object Symbol]",w="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",E="[object Float64Array]",S="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",$="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",P="[object Uint32Array]",B=/\w*$/,I=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,_={};_[s]=_["[object Array]"]=_[b]=_[v]=_[i]=_[a]=_[x]=_[E]=_[S]=_[A]=_[C]=_[l]=_[d]=_[h]=_[p]=_[y]=_[g]=_[m]=_[$]=_[T]=_[k]=_[P]=!0,_["[object Error]"]=_[c]=_[w]=!1;var O="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,j=O||N||Function("return this")(),L=n&&!n.nodeType&&n,D=L&&e&&!e.nodeType&&e,R=D&&D.exports===L;function H(e,t){return e.set(t[0],t[1]),e}function M(e,t){return e.add(t),e}function F(e,t,n,r){var o=-1,s=e?e.length:0;for(r&&s&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e);return n}function K(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function V(e,t){return function(n){return e(t(n))}}function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var q,G=Array.prototype,J=Function.prototype,X=Object.prototype,Y=j["__core-js_shared__"],Z=(q=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",Q=J.toString,ee=X.hasOwnProperty,te=X.toString,ne=RegExp("^"+Q.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=R?j.Buffer:void 0,oe=j.Symbol,se=j.Uint8Array,ie=V(Object.getPrototypeOf,Object),ae=Object.create,ce=X.propertyIsEnumerable,ue=G.splice,le=Object.getOwnPropertySymbols,de=re?re.isBuffer:void 0,he=V(Object.keys,Object),fe=De(j,"DataView"),pe=De(j,"Map"),ye=De(j,"Promise"),ge=De(j,"Set"),me=De(j,"WeakMap"),we=De(Object,"create"),be=Ke(fe),ve=Ke(pe),xe=Ke(ye),Ee=Ke(ge),Se=Ke(me),Ae=oe?oe.prototype:void 0,Ce=Ae?Ae.valueOf:void 0;function $e(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){this.__data__=new Te(e)}function Be(e,t){var n=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&We(e)}(e)&&ee.call(e,"callee")&&(!ce.call(e,"callee")||te.call(e)==s)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!ee.call(e,i)||o&&("length"==i||Me(i,r))||n.push(i);return n}function Ie(e,t,n){var r=e[t];ee.call(e,t)&&ze(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Ue(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}function _e(e,t,n,r,o,f,w){var I;if(r&&(I=f?r(e,o,f,w):r(e)),void 0!==I)return I;if(!Je(e))return e;var U=Ve(e);if(U){if(I=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,I)}else{var O=He(e),N=O==c||O==u;if(qe(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(O==h||O==s||N&&!f){if(K(e))return f?e:{};if(I=function(e){return"function"!=typeof e.constructor||Fe(e)?{}:(t=ie(e),Je(t)?ae(t):{});var t}(N?{}:e),!t)return function(e,t){return je(e,Re(e),t)}(e,function(e,t){return e&&je(t,Xe(t),e)}(I,e))}else{if(!_[O])return f?e:{};I=function(e,t,n,r){var o=e.constructor;switch(t){case b:return Ne(e);case i:case a:return new o(+e);case v:return function(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case x:case E:case S:case A:case C:case $:case T:case k:case P:return function(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case l:return function(e,t,n){var r=t?n(z(e),!0):z(e);return F(r,H,new e.constructor)}(e,r,n);case d:case g:return new o(e);case p:return function(e){var t=new e.constructor(e.source,B.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return function(e,t,n){var r=t?n(W(e),!0):W(e);return F(r,M,new e.constructor)}(e,r,n);case m:return s=e,Ce?Object(Ce.call(s)):{}}var s}(e,O,_e,t)}}w||(w=new Pe);var j=w.get(e);if(j)return j;if(w.set(e,I),!U)var L=n?function(e){return function(e,t,n){var r=t(e);return Ve(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Xe,Re)}(e):Xe(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(L||e,(function(o,s){L&&(o=e[s=o]),Ie(I,s,_e(o,t,n,r,s,e,w))})),I}function Oe(e){return!(!Je(e)||(t=e,Z&&Z in t))&&(Ge(e)||K(e)?ne:I).test(Ke(e));var t}function Ne(e){var t=new e.constructor(e.byteLength);return new se(t).set(new se(e)),t}function je(e,t,n,r){n||(n={});for(var o=-1,s=t.length;++o<s;){var i=t[o],a=r?r(n[i],e[i],i,n,e):void 0;Ie(n,i,void 0===a?e[i]:a)}return n}function Le(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function De(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Oe(n)?n:void 0}$e.prototype.clear=function(){this.__data__=we?we(null):{}},$e.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},$e.prototype.get=function(e){var t=this.__data__;if(we){var n=t[e];return n===r?void 0:n}return ee.call(t,e)?t[e]:void 0},$e.prototype.has=function(e){var t=this.__data__;return we?void 0!==t[e]:ee.call(t,e)},$e.prototype.set=function(e,t){return this.__data__[e]=we&&void 0===t?r:t,this},Te.prototype.clear=function(){this.__data__=[]},Te.prototype.delete=function(e){var t=this.__data__,n=Ue(t,e);return!(n<0)&&(n==t.length-1?t.pop():ue.call(t,n,1),!0)},Te.prototype.get=function(e){var t=this.__data__,n=Ue(t,e);return n<0?void 0:t[n][1]},Te.prototype.has=function(e){return Ue(this.__data__,e)>-1},Te.prototype.set=function(e,t){var n=this.__data__,r=Ue(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ke.prototype.clear=function(){this.__data__={hash:new $e,map:new(pe||Te),string:new $e}},ke.prototype.delete=function(e){return Le(this,e).delete(e)},ke.prototype.get=function(e){return Le(this,e).get(e)},ke.prototype.has=function(e){return Le(this,e).has(e)},ke.prototype.set=function(e,t){return Le(this,e).set(e,t),this},Pe.prototype.clear=function(){this.__data__=new Te},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Te){var r=n.__data__;if(!pe||r.length<199)return r.push([e,t]),this;n=this.__data__=new ke(r)}return n.set(e,t),this};var Re=le?V(le,Object):function(){return[]},He=function(e){return te.call(e)};function Me(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||U.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function Ke(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(fe&&He(new fe(new ArrayBuffer(1)))!=v||pe&&He(new pe)!=l||ye&&He(ye.resolve())!=f||ge&&He(new ge)!=y||me&&He(new me)!=w)&&(He=function(e){var t=te.call(e),n=t==h?e.constructor:void 0,r=n?Ke(n):void 0;if(r)switch(r){case be:return v;case ve:return l;case xe:return f;case Ee:return y;case Se:return w}return t});var Ve=Array.isArray;function We(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Ge(e)}var qe=de||function(){return!1};function Ge(e){var t=Je(e)?te.call(e):"";return t==c||t==u}function Je(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Xe(e){return We(e)?Be(e):function(e){if(!Fe(e))return he(e);var t=[];for(var n in Object(e))ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return _e(e,!0,!0)}})),u.register("2LNdB",(function(e,t){e.exports=import("./"+u("27Lyk").resolve("es3x8")).then((()=>u("hAY4E")))})),u.register("gLxQE",(function(e,t){e.exports=import("./"+u("27Lyk").resolve("hJ497")).then((()=>u("9apoj")))})),u.register("7YFNV",(function(t,n){e(t.exports,"h",(()=>l)),e(t.exports,"g",(()=>f)),e(t.exports,"b",(()=>R)),e(t.exports,"r",(()=>F)),e(t.exports,"p",(()=>Z));let r,o,s=!1;const i={},a=e=>"object"===(e=typeof e)||"function"===e;function c(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}const l=(e,t,...n)=>{let r=null,o=!1,s=!1;const i=[],c=t=>{for(let n=0;n<t.length;n++)r=t[n],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((o="function"!=typeof e&&!a(r))&&(r=String(r)),o&&s?i[i.length-1].$text$+=r:i.push(o?d(null,r):r),s=o)};if(c(n),t){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}const u=d(e,null);return u.$attrs$=t,i.length>0&&(u.$children$=i),u},d=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null};return n},h={},f=e=>M(e).$hostElement$,p=new WeakMap,y=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,o=(t.$tagName$,()=>{}),s=((e,t,n,r)=>{var o;let s=g(t);const i=G.get(s);if(e=11===e.nodeType?e:X,i)if("string"==typeof i){e=e.head||e;let t,n=p.get(e);if(n||p.set(e,n=new Set),!n.has(s)){{t=X.createElement("style"),t.innerHTML=i;const n=null!==(o=Y.$nonce$)&&void 0!==o?o:c(X);null!=n&&t.setAttribute("nonce",n),e.insertBefore(t,e.querySelector("link"))}n&&n.add(s)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,i]);return s})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);10&r&&(n["s-sc"]=s,n.classList.add(s+"-h")),o()},g=(e,t)=>"sc-"+e.$tagName$,m=(e,t,n,r,o,s)=>{if(n!==r){let i=z(e,t),c=t.toLowerCase();if("class"===t){const t=e.classList,o=b(n),s=b(r);t.remove(...o.filter((e=>e&&!s.includes(e)))),t.add(...s.filter((e=>e&&!o.includes(e))))}else if(i||"o"!==t[0]||"n"!==t[1]){const c=a(r);if((i||c&&null!==r)&&!o)try{if(e.tagName.includes("-"))e[t]=r;else{const o=null==r?"":r;"list"===t?i=!1:null!=n&&e[t]==o||(e[t]=o)}}catch(e){}null==r||!1===r?!1===r&&""!==e.getAttribute(t)||e.removeAttribute(t):(!i||4&s||o)&&!c&&(r=!0===r?"":r,e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):z(J,c)?c.slice(2):c[2]+t.slice(3),n&&Y.rel(e,t,n,!1),r&&Y.ael(e,t,r,!1)}},w=/\s/,b=e=>e?e.split(w):[],v=(e,t,n,r)=>{const o=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||i,a=t.$attrs$||i;for(r in s)r in a||m(o,r,s[r],void 0,n,t.$flags$);for(r in a)m(o,r,s[r],a[r],n,t.$flags$)},x=(e,t,n,o)=>{const s=t.$children$[n];let i,a,c=0;if(null!==s.$text$)i=s.$elm$=X.createTextNode(s.$text$);else if(i=s.$elm$=X.createElement(s.$tag$),v(null,s,false),null!=r&&i["s-si"]!==r&&i.classList.add(i["s-si"]=r),s.$children$)for(c=0;c<s.$children$.length;++c)a=x(e,s,c),a&&i.appendChild(a);return i},E=(e,t,n,r,s,i)=>{let a,c=e;for(c.shadowRoot&&c.tagName===o&&(c=c.shadowRoot);s<=i;++s)r[s]&&(a=x(null,n,s),a&&(r[s].$elm$=a,c.insertBefore(a,t)))},S=(e,t,n,r,o)=>{for(;t<=n;++t)(r=e[t])&&r.$elm$.remove()},A=(e,t)=>e.$tag$===t.$tag$,C=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,o=t.$children$,s=t.$text$;null===s?(v(e,t,false),null!==r&&null!==o?((e,t,n,r)=>{let o,s=0,i=0,a=t.length-1,c=t[0],u=t[a],l=r.length-1,d=r[0],h=r[l];for(;s<=a&&i<=l;)null==c?c=t[++s]:null==u?u=t[--a]:null==d?d=r[++i]:null==h?h=r[--l]:A(c,d)?(C(c,d),c=t[++s],d=r[++i]):A(u,h)?(C(u,h),u=t[--a],h=r[--l]):A(c,h)?(C(c,h),e.insertBefore(c.$elm$,u.$elm$.nextSibling),c=t[++s],h=r[--l]):A(u,d)?(C(u,d),e.insertBefore(u.$elm$,c.$elm$),u=t[--a],d=r[++i]):(o=x(t&&t[i],n,i),d=r[++i],o&&c.$elm$.parentNode.insertBefore(o,c.$elm$));s>a?E(e,null==r[l+1]?null:r[l+1].$elm$,n,r,i,l):i>l&&S(t,s,a)})(n,r,t,o):null!==o?(null!==e.$text$&&(n.textContent=""),E(n,null,t,o,0,o.length-1)):null!==r&&S(r,0,r.length-1)):e.$text$!==s&&(n.data=s)},$=(e,t)=>{const n=e.$hostElement$,s=e.$vnode$||d(null,null),i=(a=t)&&a.$tag$===h?t:l(null,null,t);var a;o=n.tagName,i.$tag$=null,i.$flags$|=4,e.$vnode$=i,i.$elm$=s.$elm$=n.shadowRoot||n,r=n["s-sc"],C(s,i)},T=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((t=>e.$onRenderResolve$=t)))},k=(e,t)=>{if(e.$flags$|=16,4&e.$flags$)return void(e.$flags$|=512);T(e,e.$ancestorComponent$);return ie((()=>P(e,t)))},P=(e,t)=>{const n=(e.$cmpMeta$.$tagName$,()=>{}),r=e.$lazyInstance$;return n(),O(undefined,(()=>B(e,r,t)))},B=async(e,t,n)=>{const r=e.$hostElement$,o=(e.$cmpMeta$.$tagName$,()=>{}),s=r["s-rc"];n&&y(e);const i=(e.$cmpMeta$.$tagName$,()=>{});I(e,t),s&&(s.map((e=>e())),r["s-rc"]=void 0),i(),o();{const t=r["s-p"],n=()=>U(e);0===t.length?n():(Promise.all(t).then(n),e.$flags$|=4,t.length=0)}},I=(e,t,n)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,$(e,t)}catch(t){V(t,e.$hostElement$)}return null},U=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$,n=()=>{},r=e.$ancestorComponent$;64&e.$flags$?n():(e.$flags$|=64,N(t),n(),e.$onReadyResolve$(t),r||_()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&se((()=>k(e,!1))),e.$flags$&=-517},_=e=>{N(X.documentElement),se((()=>((e,t,n)=>{const r=Y.ce(t,n);return e.dispatchEvent(r),r})(J,"appload",{detail:{namespace:"connect-ui"}})))},O=(e,t)=>e&&e.then?e.then(t):t(),N=e=>e.classList.add("hydrated"),j=(e,t,n,r)=>{const o=M(e),s=o.$instanceValues$.get(t),i=o.$flags$,c=o.$lazyInstance$;var u;null==(u=n)||a(u),n=u;const l=Number.isNaN(s)&&Number.isNaN(n);8&i&&void 0!==s||!(n!==s&&!l)||(o.$instanceValues$.set(t,n),c&&2==(18&i)&&k(o,!1))},L=(e,t,n)=>{if(t.$members$){const r=Object.entries(t.$members$),o=e.prototype;r.map((([e,[t]])=>{(31&t||2&n&&32&t)&&Object.defineProperty(o,e,{get(){return t=e,M(this).$instanceValues$.get(t);var t},set(t){j(this,e,t)},configurable:!0,enumerable:!0})}))}return e},D=async(e,t,n,r,o)=>{if(0==(32&t.$flags$)){{if(t.$flags$|=32,(o=q(n)).then){const e=()=>{};o=await o,e()}o.isProxied||(L(o,n,2),o.isProxied=!0);const e=(n.$tagName$,()=>{});t.$flags$|=8;try{new o(t)}catch(e){V(e)}t.$flags$&=-9,e()}if(o.style){let e=o.style;const t=g(n);if(!G.has(t)){const r=(n.$tagName$,()=>{});((e,t,n)=>{let r=G.get(e);Q&&n?(r=r||new CSSStyleSheet,"string"==typeof r?r=t:r.replaceSync(t)):r=t,G.set(e,r)})(t,e,!!(1&n.$flags$)),r()}}}const s=t.$ancestorComponent$,i=()=>k(t,!0);s&&s["s-rc"]?s["s-rc"].push(i):i()},R=(e,t={})=>{var n;const r=()=>{},o=[],s=t.exclude||[],i=J.customElements,a=X.head,u=a.querySelector("meta[charset]"),l=X.createElement("style"),d=[];let h,f=!0;Object.assign(Y,t),Y.$resourcesUrl$=new URL(t.resourcesUrl||"./",X.baseURI).href,e.map((e=>{e[1].map((t=>{const n={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};n.$members$=t[2];const r=n.$tagName$,a=class extends HTMLElement{constructor(e){super(e),K(e=this,n),1&n.$flags$&&e.attachShadow({mode:"open"})}connectedCallback(){h&&(clearTimeout(h),h=null),f?d.push(this):Y.jmp((()=>(e=>{if(0==(1&Y.$flags$)){const t=M(e),n=t.$cmpMeta$,r=(n.$tagName$,()=>{});if(!(1&t.$flags$)){t.$flags$|=1;{let n=e;for(;n=n.parentNode||n.host;)if(n["s-p"]){T(t,t.$ancestorComponent$=n);break}}n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),D(0,t,n)}r()}})(this)))}disconnectedCallback(){Y.jmp((()=>{return e=this,void(0==(1&Y.$flags$)&&M(e));var e}))}componentOnReady(){return M(this).$onReadyPromise$}};n.$lazyBundleId$=e[0],s.includes(r)||i.get(r)||(o.push(r),i.define(r,L(a,n,1)))}))}));{l.innerHTML=o+"{visibility:hidden}.hydrated{visibility:inherit}",l.setAttribute("data-styles","");const e=null!==(n=Y.$nonce$)&&void 0!==n?n:c(X);null!=e&&l.setAttribute("nonce",e),a.insertBefore(l,u?u.nextSibling:a.firstChild)}f=!1,d.length?d.map((e=>e.connectedCallback())):Y.jmp((()=>h=setTimeout(_,30))),r()},H=new WeakMap,M=e=>H.get(e),F=(e,t)=>H.set(t.$lazyInstance$=e,t),K=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onReadyPromise$=new Promise((e=>n.$onReadyResolve$=e)),e["s-p"]=[],e["s-rc"]=[],H.set(e,n)},z=(e,t)=>t in e,V=(e,t)=>(0,console.error)(e,t),W=new Map,q=(e,t,n)=>{const r=e.$tagName$.replace(/-/g,"_"),o=e.$lazyBundleId$,s=W.get(o);if(s)return s[r];if(!n||!BUILD.hotModuleReplacement){const e=e=>(W.set(o,e),e[r]);if("connect-modal"===o)return u("3sSG4").then(e,V)}return import(`./${o}.entry.js`).then((e=>(W.set(o,e),e[r])),V)},G=new Map,J="undefined"!=typeof window?window:{},X=J.document||{head:{}},Y={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},Z=e=>Promise.resolve(e),Q=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),ee=[],te=[],ne=(e,t)=>n=>{e.push(n),s||(s=!0,t&&4&Y.$flags$?se(oe):Y.raf(oe))},re=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){V(e)}e.length=0},oe=()=>{re(ee),re(te),(s=ee.length>0)&&Y.raf(oe)},se=e=>Z().then(e),ie=ne(te,!0)})),u.register("3sSG4",(function(e,t){e.exports=import("./"+u("27Lyk").resolve("hQdJV")).then((()=>u("3gXcl")))})),u("27Lyk").register(JSON.parse('{"5SCbD":"index.e097d325.js","es3x8":"dom.0f89fc8e.js","hJ497":"core-js.72cba9dc.js","hQdJV":"connect-modal.entry.3c912ed2.js"}')),(o=r||(r={}))[o.Testnet=2147483648]="Testnet",o[o.Mainnet=1]="Mainnet",(i=s||(s={}))[i.Mainnet=0]="Mainnet",i[i.Testnet=128]="Testnet";const l=33;var d;d="undefined"!=typeof self?self:{},function(e){var t={searchParams:"URLSearchParams"in d,iterable:"Symbol"in d&&"iterator"in Symbol,blob:"FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in d,arrayBuffer:"ArrayBuffer"in d};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function a(e){this.map={},e instanceof a?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function l(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var n;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:t.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:t.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():t.arrayBuffer&&t.blob&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||r(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e,t,n,r=c(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=u(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(e,t){e=o(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},a.prototype.delete=function(e){delete this.map[o(e)]},a.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},a.prototype.set=function(e,t){this.map[o(e)]=s(t)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),i(e)},a.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),i(e)},a.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),i(e)},t.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,r,o=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),p.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function g(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},f.call(y.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];m.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.DOMException=d.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function b(n,r){return new Promise((function(o,s){var i=new y(n,r);if(i.signal&&i.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function u(){c.abort()}c.onload=function(){var e,t,n={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new a,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;o(new m(r,n))},c.onerror=function(){s(new TypeError("Network request failed"))},c.ontimeout=function(){s(new TypeError("Network request failed"))},c.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},c.open(i.method,i.url,!0),"include"===i.credentials?c.withCredentials=!0:"omit"===i.credentials&&(c.withCredentials=!1),"responseType"in c&&t.blob&&(c.responseType="blob"),i.headers.forEach((function(e,t){c.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener("abort",u),c.onreadystatechange=function(){4===c.readyState&&i.signal.removeEventListener("abort",u)}),c.send(void 0===i._bodyInit?null:i._bodyInit)}))}b.polyfill=!0,d.fetch||(d.fetch=b,d.Headers=a,d.Request=y,d.Response=m),e.Headers=a,e.Request=y,e.Response=m,e.fetch=b,Object.defineProperty(e,"__esModule",{value:!0})}({});const h={referrerPolicy:"origin"};async function f(e,t){const n={};Object.assign(n,t,h);return await fetch(e,n)}function p(...e){const{fetchLib:t,middlewares:n}=function(e){let t=f,n=[];return e.length>0&&"function"==typeof e[0]&&(t=e.shift()),e.length>0&&(n=e),{fetchLib:t,middlewares:n}}(e);return async(e,r)=>{let o={url:e,init:r??{}};for(const e of n)if("function"==typeof e.pre){o=await Promise.resolve(e.pre({fetch:t,...o}))??o}let s=await t(o.url,o.init);for(const e of n)if("function"==typeof e.post){const n=await Promise.resolve(e.post({fetch:t,url:o.url,init:o.init,response:s?.clone()??s}));s=n??s}return s}}const y=["mainnet","testnet","devnet","mocknet"];class g{constructor(e){this.version=s.Mainnet,this.chainId=r.Mainnet,this.bnsLookupUrl="https://stacks-node-api.mainnet.stacks.co",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===s.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=e=>`${this.coreApiUrl}${this.accountEndpoint}/${e}?proof=0`,this.getAccountExtendedBalancesApiUrl=e=>`${this.coreApiUrl}/extended/v1/address/${e}/balances`,this.getAbiApiUrl=(e,t)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${e}/${t}`,this.getReadOnlyFunctionCallApiUrl=(e,t,n)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${e}/${t}/${encodeURIComponent(n)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(e,t)=>{let n=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${e}`;return t&&(n=`${n}?limit=${t.limit}&offset=${t.offset}`),n},this.getRewardsTotalUrl=e=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${e}/total`,this.getRewardHoldersUrl=(e,t)=>{let n=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${e}`;return t&&(n=`${n}?limit=${t.limit}&offset=${t.offset}`),n},this.getStackerInfoUrl=(e,t)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${e}/${t}/get-stacker-info`,this.getDataVarUrl=(e,t,n)=>`${this.coreApiUrl}/v2/data_var/${e}/${t}/${n}?proof=0`,this.getMapEntryUrl=(e,t,n)=>`${this.coreApiUrl}/v2/map_entry/${e}/${t}/${n}?proof=0`,this.coreApiUrl=e.url,this.fetchFn=e.fetchFn??p()}getNameInfo(e){const t=`${this.bnsLookupUrl}/v1/names/${e}`;return this.fetchFn(t).then((e=>{if(404===e.status)throw new Error("Name not found");if(200!==e.status)throw new Error(`Bad response status: ${e.status}`);return e.json()})).then((e=>e.address?Object.assign({},e,{address:e.address}):e))}}g.fromName=e=>{switch(e){case"mainnet":return new m;case"testnet":return new w;case"devnet":return new v;case"mocknet":return new b;default:throw new Error(`Invalid network name provided. Must be one of the following: ${y.join(", ")}`)}},g.fromNameOrNetwork=e=>"string"!=typeof e&&"version"in e?e:g.fromName(e);class m extends g{constructor(e){super({url:e?.url??"https://stacks-node-api.mainnet.stacks.co",fetchFn:e?.fetchFn}),this.version=s.Mainnet,this.chainId=r.Mainnet}}class w extends g{constructor(e){super({url:e?.url??"https://stacks-node-api.testnet.stacks.co",fetchFn:e?.fetchFn}),this.version=s.Testnet,this.chainId=r.Testnet}}class b extends g{constructor(e){super({url:e?.url??"http://localhost:3999",fetchFn:e?.fetchFn}),this.version=s.Testnet,this.chainId=r.Testnet}}const v=b,x={network:{layer1:"placeholder"},logLevel:"debug"},E=["debug","info","warn","error","none"],S={},A={};for(let e=0;e<E.length;e++){const t=E[e];S[t]=e,A[e]=t}class C{static error(e){this.shouldLog("error")&&console.error(this.logMessage("error",e))}static warn(e){this.shouldLog("warn")&&console.warn(this.logMessage("warn",e))}static info(e){this.shouldLog("info")&&console.log(this.logMessage("info",e))}static debug(e){this.shouldLog("debug")&&console.log(this.logMessage("debug",e))}static logMessage(e,t){return`[${e.toUpperCase()}] ${t}`}static shouldLog(e){return S[x.logLevel]<=S[e]}}function $(){return new Date((new Date).setMonth((new Date).getMonth()+1))}function T(){return new Date((new Date).setHours((new Date).getHours()+1))}function k(e,t){void 0!==e&&""!==e||(e="0.0.0"),void 0!==t&&""!==e||(t="0.0.0");const n=e.split(".").map((e=>parseInt(e,10))),r=t.split(".").map((e=>parseInt(e,10)));for(let o=0;o<t.length;o++)if(o>=e.length&&r.push(0),n[o]<r[o])return!1;return!0}function P(){let e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function B(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available")}function I(e,t,n){return n?`Use of '${n}' requires \`${t}\` which is unavailable on the '${e}' object within the currently executing environment.`:`\`${t}\` is unavailable on the '${e}' object within the currently executing environment.`}function U(e,{throwIfUnavailable:t,usageDesc:n,returnEmptyObject:r}={}){let o;try{if(o=B(),o){const t=o[e];if(t)return t}}catch(t){C.error(`Error getting object '${e}' from global scope '${o}': ${t}`)}if(t){const t=I(o,e.toString(),n);throw C.error(t),new Error(t)}if(r)return{}}function _(e,t,n){return D(O(e,t),n)}function O(e,t){let n=e;if("number"==typeof n){if(!Number.isInteger(n))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");return BigInt(n)}if("string"==typeof n)if(n.toLowerCase().startsWith("0x")){let e=n.slice(2);e=e.padStart(e.length+e.length%2,"0"),n=F(e)}else try{return BigInt(n)}catch(e){if(e instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${n}' is not finite.`)}if("bigint"==typeof n)return n;if(n instanceof Uint8Array){if(t){const e=function(e,t){return function(e,t){return e&BigInt(1)<<t}(e,t-BigInt(1))?e-(BigInt(1)<<t):e}(BigInt(`0x${M(n)}`),BigInt(8*n.byteLength));return BigInt(e.toString())}return BigInt(`0x${M(n)}`)}if(null!=n&&"object"==typeof n&&"BN"===n.constructor.name)return BigInt(n.toString());throw new TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.")}function N(e){if("string"!=typeof e)throw new TypeError("hexToBigInt: expected string, got "+typeof e);return BigInt(`0x${e}`)}function j(e,t=8){return("bigint"==typeof e?e:O(e,!1)).toString(16).padStart(2*t,"0")}function L(e){return parseInt(e,16)}function D(e,t=16){return F(j(e,t))}function R(e,t){if(e<-(BigInt(1)<<t-BigInt(1))||(BigInt(1)<<t-BigInt(1))-BigInt(1)<e)throw`Unable to represent integer in width: ${t}`;return e>=BigInt(0)?BigInt(e):e+(BigInt(1)<<t)}const H=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function M(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(const n of e)t+=H[n];return t}function F(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);const t=e.length%2?`0${e}`:e,n=new Uint8Array(t.length/2);for(let e=0;e<n.length;e++){const r=2*e,o=t.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[e]=s}return n}function K(e){return(new TextEncoder).encode(e)}function z(e){return(new TextDecoder).decode(e)}function V(e){const t=[];for(let n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return new Uint8Array(t)}function W(e){return String.fromCharCode.apply(null,e)}function q(e){return!Number.isInteger(e)||e<0||e>255}function G(e){if(e.some(q))throw new Error("Some values are invalid bytes.");return new Uint8Array(e)}function J(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n}function X(e){return J(...e.map((e=>"number"==typeof e?G([e]):e instanceof Array?G(e):e)))}const Y={"@type":"Person","@context":"http://schema.org"},Z=["store_write"];class Q{constructor(e=Z.slice(),t=U("location",{returnEmptyObject:!0})?.origin,n="",r="/manifest.json",o,s="https://browser.blockstack.org/auth"){this.appDomain=t,this.scopes=e,this.redirectPath=n,this.manifestPath=r,this.coreNode=o,this.authenticatorURL=s}redirectURI(){return`${this.appDomain}${this.redirectPath}`}manifestURI(){return`${this.appDomain}${this.manifestPath}`}}const ee={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(ee);class te extends Error{constructor(e){super();let t=e.message,n=`Error Code: ${e.code}`,r=this.stack;if(r)n+=`Stack Trace:\n${r}`;else try{throw new Error}catch(e){r=e.stack}t+=`\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\n\n${n}`,this.message=t,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}\n    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class ne extends te{constructor(e,t=""){super({code:ee.MISSING_PARAMETER,message:t,parameter:e}),this.name="MissingParametersError"}}class re extends te{constructor(e=""){super({code:ee.INVALID_DID_ERROR,message:e}),this.name="InvalidDIDError"}}class oe extends te{constructor(e){const t=`Failed to login: ${e}`;super({code:ee.LOGIN_FAILED_ERROR,message:t}),this.message=t,this.name="LoginFailedError"}}class se extends te{constructor(e="Unable to decrypt cipher object."){super({code:ee.FAILED_DECRYPTION_ERROR,message:e}),this.message=e,this.name="FailedDecryptionError"}}class ie extends te{constructor(e){super({code:ee.INVALID_STATE,message:e}),this.message=e,this.name="InvalidStateError"}}class ae extends te{constructor(e){super({code:ee.INVALID_STATE,message:e}),this.message=e,this.name="NoSessionDataError"}}const ce="1.0.0";class ue{constructor(e){this.version=ce,this.userData=e.userData,this.transitKey=e.transitKey,this.etags=e.etags?e.etags:{}}static fromJSON(e){if(e.version!==ce)throw new ie(`JSON data version ${e.version} not supported by SessionData`);const t={coreNode:e.coreNode,userData:e.userData,transitKey:e.transitKey,etags:e.etags};return new ue(t)}toString(){return JSON.stringify(this)}}class le{constructor(e){if(e){const t=new ue(e);this.setSessionData(t)}}getSessionData(){throw new Error("Abstract class")}setSessionData(e){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}}class de extends le{constructor(e){super(e),this.sessionData||this.setSessionData(new ue({}))}getSessionData(){if(!this.sessionData)throw new ae("No session data was found.");return this.sessionData}setSessionData(e){return this.sessionData=e,!0}deleteSessionData(){return this.setSessionData(new ue({})),!0}}class he extends le{constructor(e){super(e),e&&e.storeOptions&&e.storeOptions.localStorageKey&&"string"==typeof e.storeOptions.localStorageKey?this.key=e.storeOptions.localStorageKey:this.key="blockstack-session";if(!localStorage.getItem(this.key)){const e=new ue({});this.setSessionData(e)}}getSessionData(){const e=localStorage.getItem(this.key);if(!e)throw new ae("No session data was found in localStorage");const t=JSON.parse(e);return ue.fromJSON(t)}setSessionData(e){return localStorage.setItem(this.key,e.toString()),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData(new ue({})),!0}}var fe={},pe=fe&&fe.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),ye=fe&&fe.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||pe(t,e,n)};Object.defineProperty(fe,"__esModule",{value:!0}),ye(u("eWPSJ"),fe),ye(u("hyBmL"),fe),ye(u("3m48P"),fe),ye(u("6E2Fs"),fe),ye(u("dLPMj"),fe);var ge=u("70Xw9"),me=u("6XnWx"),we=u("7Rh2L");function be(e){const t="string"==typeof e?F(e):e;if(32!=t.length&&33!=t.length)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${t.length}`);if(33==t.length&&1!==t[32])throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return t}function ve(e,t){return e[t]}function xe(e,t,n){e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t}var Ee={},Se={};Ee=(Se=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=r}var i=e.length,a=e.charAt(0),c=Math.log(i)/Math.log(256),u=Math.log(256)/Math.log(i);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,o=0;e[n]===a;)r++,n++;for(var s=(e.length-n)*c+1>>>0,u=new Uint8Array(s);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var d=0,h=s-1;(0!==l||d<o)&&-1!==h;h--,d++)l+=i*u[h]>>>0,u[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=d,n++}for(var f=s-o;f!==s&&0===u[f];)f++;for(var p=new Uint8Array(r+(s-f)),y=r;f!==s;)p[y++]=u[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var c=(s-o)*u+1>>>0,l=new Uint8Array(c);o!==s;){for(var d=t[o],h=0,f=c-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*l[f]>>>0,l[f]=d%i>>>0,d=d/i>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,o++}for(var p=c-r;p!==c&&0===l[p];)p++;for(var y=a.repeat(n);p<c;++p)y+=e.charAt(l[p]);return y},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+i+" character")}}})("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.ripemd160=Ae.RIPEMD160=void 0;var Ce=u("g9W9K"),$e=u("3Bcdj");const Te=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ke=Uint8Array.from({length:16},((e,t)=>t)),Pe=ke.map((e=>(9*e+5)%16));let Be=[ke],Ie=[Pe];for(let e=0;e<4;e++)for(let t of[Be,Ie])t.push(t[e].map((e=>Te[e])));const Ue=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),_e=Be.map(((e,t)=>e.map((e=>Ue[t][e])))),Oe=Ie.map(((e,t)=>e.map((e=>Ue[t][e])))),Ne=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),je=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Le=(e,t)=>e<<t|e>>>32-t;function De(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const Re=new Uint32Array(16);class He extends Ce.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:o}=this;return[e,t,n,r,o]}set(e,t,n,r,o){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Re[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,o=0|this.h1,s=o,i=0|this.h2,a=i,c=0|this.h3,u=c,l=0|this.h4,d=l;for(let e=0;e<5;e++){const t=4-e,h=Ne[e],f=je[e],p=Be[e],y=Ie[e],g=_e[e],m=Oe[e];for(let t=0;t<16;t++){const r=Le(n+De(e,o,i,c)+Re[p[t]]+h,g[t])+l|0;n=l,l=c,c=0|Le(i,10),i=o,o=r}for(let e=0;e<16;e++){const n=Le(r+De(t,s,a,u)+Re[y[e]]+f,m[e])+d|0;r=d,d=u,u=0|Le(a,10),a=s,s=n}}this.set(this.h1+i+u|0,this.h2+c+d|0,this.h3+l+r|0,this.h4+n+s|0,this.h0+o+a|0)}roundClean(){Re.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}Ae.RIPEMD160=He,Ae.ripemd160=(0,$e.wrapConstructor)((()=>new He));me=u("6XnWx");var Me={};Object.defineProperty(Me,"__esModule",{value:!0}),Me.sha384=Me.sha512_256=Me.sha512_224=Me.sha512=Me.SHA512=void 0;Ce=u("g9W9K");var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.add=Fe.toBig=Fe.split=Fe.fromBig=void 0;const Ke=BigInt(2**32-1),ze=BigInt(32);function Ve(e,t=!1){return t?{h:Number(e&Ke),l:Number(e>>ze&Ke)}:{h:0|Number(e>>ze&Ke),l:0|Number(e&Ke)}}function We(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:i}=Ve(e[o],t);[n[o],r[o]]=[s,i]}return[n,r]}Fe.fromBig=Ve,Fe.split=We;Fe.toBig=(e,t)=>BigInt(e>>>0)<<ze|BigInt(t>>>0);function qe(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}Fe.add=qe;const Ge={fromBig:Ve,split:We,toBig:Fe.toBig,shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:qe,add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,add5H:(e,t,n,r,o,s)=>t+n+r+o+s+(e/2**32|0)|0,add5L:(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0)};Fe.default=Ge;$e=u("3Bcdj");const[Je,Xe]=Fe.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Ye=new Uint32Array(80),Ze=new Uint32Array(80);class Qe extends Ce.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:s,Dh:i,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:h,Gl:f,Hh:p,Hl:y}=this;return[e,t,n,r,o,s,i,a,c,u,l,d,h,f,p,y]}set(e,t,n,r,o,s,i,a,c,u,l,d,h,f,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|s,this.Dh=0|i,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)Ye[n]=e.getUint32(t),Ze[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Ye[e-15],n=0|Ze[e-15],r=Fe.default.rotrSH(t,n,1)^Fe.default.rotrSH(t,n,8)^Fe.default.shrSH(t,n,7),o=Fe.default.rotrSL(t,n,1)^Fe.default.rotrSL(t,n,8)^Fe.default.shrSL(t,n,7),s=0|Ye[e-2],i=0|Ze[e-2],a=Fe.default.rotrSH(s,i,19)^Fe.default.rotrBH(s,i,61)^Fe.default.shrSH(s,i,6),c=Fe.default.rotrSL(s,i,19)^Fe.default.rotrBL(s,i,61)^Fe.default.shrSL(s,i,6),u=Fe.default.add4L(o,c,Ze[e-7],Ze[e-16]),l=Fe.default.add4H(u,r,a,Ye[e-7],Ye[e-16]);Ye[e]=0|l,Ze[e]=0|u}let{Ah:n,Al:r,Bh:o,Bl:s,Ch:i,Cl:a,Dh:c,Dl:u,Eh:l,El:d,Fh:h,Fl:f,Gh:p,Gl:y,Hh:g,Hl:m}=this;for(let e=0;e<80;e++){const t=Fe.default.rotrSH(l,d,14)^Fe.default.rotrSH(l,d,18)^Fe.default.rotrBH(l,d,41),w=Fe.default.rotrSL(l,d,14)^Fe.default.rotrSL(l,d,18)^Fe.default.rotrBL(l,d,41),b=l&h^~l&p,v=d&f^~d&y,x=Fe.default.add5L(m,w,v,Xe[e],Ze[e]),E=Fe.default.add5H(x,g,t,b,Je[e],Ye[e]),S=0|x,A=Fe.default.rotrSH(n,r,28)^Fe.default.rotrBH(n,r,34)^Fe.default.rotrBH(n,r,39),C=Fe.default.rotrSL(n,r,28)^Fe.default.rotrBL(n,r,34)^Fe.default.rotrBL(n,r,39),$=n&o^n&i^o&i,T=r&s^r&a^s&a;g=0|p,m=0|y,p=0|h,y=0|f,h=0|l,f=0|d,({h:l,l:d}=Fe.default.add(0|c,0|u,0|E,0|S)),c=0|i,u=0|a,i=0|o,a=0|s,o=0|n,s=0|r;const k=Fe.default.add3L(S,C,T);n=Fe.default.add3H(k,E,A,$),r=0|k}({h:n,l:r}=Fe.default.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:s}=Fe.default.add(0|this.Bh,0|this.Bl,0|o,0|s)),({h:i,l:a}=Fe.default.add(0|this.Ch,0|this.Cl,0|i,0|a)),({h:c,l:u}=Fe.default.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:d}=Fe.default.add(0|this.Eh,0|this.El,0|l,0|d)),({h:h,l:f}=Fe.default.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:y}=Fe.default.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:m}=Fe.default.add(0|this.Hh,0|this.Hl,0|g,0|m)),this.set(n,r,o,s,i,a,c,u,l,d,h,f,p,y,g,m)}roundClean(){Ye.fill(0),Ze.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Me.SHA512=Qe;class et extends Qe{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class tt extends Qe{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class nt extends Qe{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Me.sha512=(0,$e.wrapConstructor)((()=>new Qe)),Me.sha512_224=(0,$e.wrapConstructor)((()=>new et)),Me.sha512_256=(0,$e.wrapConstructor)((()=>new tt)),Me.sha384=(0,$e.wrapConstructor)((()=>new nt));const rt='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function ot(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return{lib:crypto.subtle,name:"subtleCrypto"};try{return{lib:u("kjyEk"),name:"nodeCrypto"}}catch(e){throw new Error(rt)}}function st(e){return(0,me.sha256)(e)}function it(e){return(0,Me.sha512)(e)}const at=0;function ct(e,t){return function(e){const t=(0,me.sha256)((0,me.sha256)(e));return n(Ee).encode(J(e,t).slice(0,e.length+4))}(J(new Uint8Array([e]),t.slice(0,20)))}function ut(e,t=at){const n="string"==typeof e?F(e):e;var r;return ct(t,(r=st(n),(0,Ae.ripemd160)(r)))}function lt(e){const t=be(e);return M((0,we.getPublicKey)(t.slice(0,32),!0))}function dt(e){return`did:btc-addr:${e}`}function ht(e){if(e){const t=function(e){const t=e.split(":");if(3!==t.length)throw new re("Decentralized IDs must have 3 parts");if("did"!==t[0].toLowerCase())throw new re('Decentralized IDs must start with "did"');return t[1].toLowerCase()}(e);return"btc-addr"===t?e.split(":")[2]:void 0}}function ft(e){const t=(0,fe.decodeToken)(e).payload;if("string"==typeof t)throw new Error("Unexpected token payload type of string");const n=t.public_keys;if(1!==n.length)throw new Error("Multiple public keys are not supported");{const t=n[0];try{return new(0,fe.TokenVerifier)("ES256k",t).verify(e)}catch(e){return!1}}}function pt(e){const t=(0,fe.decodeToken)(e).payload;if("string"==typeof t)throw new Error("Unexpected token payload type of string");const n=t.public_keys,r=ht(t.iss);if(1!==n.length)throw new Error("Multiple public keys are not supported");if(ut(n[0])===r)return!0;return!1}function yt(e){const t=(0,fe.decodeToken)(e).payload;if("string"==typeof t)throw new Error("Unexpected token payload type of string");if(t.iat){if("number"!=typeof t.iat)return!1;const e=new Date(1e3*t.iat);return!((new Date).getTime()<e.getTime())}return!0}function gt(e){const t=(0,fe.decodeToken)(e).payload;if("string"==typeof t)throw new Error("Unexpected token payload type of string");if(t.exp){if("number"!=typeof t.exp)return!1;const e=new Date(1e3*t.exp);return!((new Date).getTime()>e.getTime())}return!0}async function mt(e){return(await Promise.all([gt(e),yt(e),ft(e),pt(e)])).every((e=>e))}we.utils.hmacSha256Sync=(e,...t)=>{const n=ge.hmac.create(me.sha256,e);return t.forEach((e=>n.update(e))),n.digest()};ge=u("70Xw9"),me=u("6XnWx"),we=u("7Rh2L");const wt=32;function bt(e){if(e.length<4*wt+1)throw new Error("Invalid signature");const t=e.slice(0,2),n=e.slice(2,2+2*wt),r=e.slice(2+2*wt);return{recoveryId:L(t),r:n,s:r}}var vt=u("kuxul");class xt{constructor(e,t){this.createCipher=e,this.createDecipher=t}async encrypt(e,t,n,r){if("aes-128-cbc"!==e&&"aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);const o=this.createCipher(e,t,n),s=new Uint8Array(J(o.update(r),o.final()));return Promise.resolve(s)}async decrypt(e,t,n,r){if("aes-128-cbc"!==e&&"aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);const o=this.createDecipher(e,t,n),s=new Uint8Array(J(o.update(r),o.final()));return Promise.resolve(s)}}class Et{constructor(e){this.subtleCrypto=e}async encrypt(e,t,n,r){let o,s;if("aes-128-cbc"===e)o="AES-CBC",s=128;else{if("aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);o="AES-CBC",s=256}const i=await this.subtleCrypto.importKey("raw",t,{name:o,length:s},!1,["encrypt"]),a=await this.subtleCrypto.encrypt({name:o,iv:n},i,r);return new Uint8Array(a)}async decrypt(e,t,n,r){let o,s;if("aes-128-cbc"===e)o="AES-CBC",s=128;else{if("aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);o="AES-CBC",s=256}const i=await this.subtleCrypto.importKey("raw",t,{name:o,length:s},!1,["decrypt"]),a=await this.subtleCrypto.decrypt({name:o,iv:n},i,r);return new Uint8Array(a)}}async function St(){const e=await ot();return"subtleCrypto"===e.name?new Et(e.lib):new xt(e.lib.createCipheriv,e.lib.createDecipheriv)}me=u("6XnWx");var At,Ct;function $t(e,t){return(0,ge.hmac)(me.sha256,e,t)}function Tt(e){const t=it(e);return{encryptionKey:t.slice(0,32),hmacKey:t.slice(32)}}async function kt(e,t,n,r){const o=function(e){const t={result:!1,reason_data:"Invalid public key format",reason:At.InvalidFormat},n={result:!1,reason_data:"Public key is not a point",reason:At.IsNotPoint};if(66!==e.length&&130!==e.length)return t;const r=e.slice(0,2);if(130===e.length&&"04"!==r)return t;if(66===e.length&&"02"!==r&&"03"!==r)return t;if(null===e.match(/^[0-9a-f]+$/i))return t;try{return we.Point.fromHex(e).assertValidity(),{result:!0,reason_data:null,reason:null}}catch(e){return n}}(e);if(!o.result)throw o;const s=we.utils.randomPrivateKey(),i=(0,we.getPublicKey)(s,!0);let a=(0,we.getSharedSecret)(s,e,!0);a=a.slice(1);const c=Tt(a),u=we.utils.randomBytes(16),l=await async function(e,t,n){const r=await St();return await r.encrypt("aes-256-cbc",t,e,n)}(u,c.encryptionKey,t),d=J(u,i,l),h=$t(c.hmacKey,d);let f;if(r&&"hex"!==r){if("base64"!==r)throw new Error(`Unexpected cipherTextEncoding "${r}"`);f=(0,vt.fromByteArray)(l)}else f=M(l);const p={iv:M(u),ephemeralPK:M(i),cipherText:f,mac:M(h),wasString:n};return r&&"hex"!==r&&(p.cipherTextEncoding=r),p}async function Pt(e,t){if(!t.ephemeralPK)throw new se("Unable to get public key from cipher object. You might be trying to decrypt an unencrypted object.");const n=t.ephemeralPK;let r=(0,we.getSharedSecret)(e,n,!0);r=r.slice(1);const o=Tt(r),s=F(t.iv);let i;if(t.cipherTextEncoding&&"hex"!==t.cipherTextEncoding){if("base64"!==t.cipherTextEncoding)throw new Error(`Unexpected cipherTextEncoding "${t.cipherText}"`);i=(0,vt.toByteArray)(t.cipherText)}else i=F(t.cipherText);const a=J(s,F(n),i),c=$t(o.hmacKey,a);if(!function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}(F(t.mac),c))throw new se("Decryption failed: failure in MAC check");const u=await async function(e,t,n){const r=await St();return await r.decrypt("aes-256-cbc",t,e,n)}(s,o.encryptionKey,i);return t.wasString?z(u):u}function Bt(e,t){const n="string"==typeof t?K(t):t,r=lt(e),o=st(n);return{signature:M((0,we.signSync)(o,e)),publicKey:r}}(we=u("7Rh2L")).utils.hmacSha256Sync=(e,...t)=>{const n=ge.hmac.create(me.sha256,e);return t.forEach((e=>n.update(e))),n.digest()},(Ct=At||(At={})).InvalidFormat="InvalidFormat",Ct.IsNotPoint="IsNotPoint";const It="1.4.0";function Ut(){return M(we.utils.randomPrivateKey())}function _t(e,t,n,r=Z.slice(),o,s=$().getTime(),i={}){const a=e=>{const t=U("location",{throwIfUnavailable:!0,usageDesc:`makeAuthRequest([${e}=undefined])`});return t?.origin};t||(t=`${a("redirectURI")}/`),n||(n=`${a("manifestURI")}/manifest.json`),o||(o=a("appDomain"));const c=Object.assign({},i,{jti:P(),iat:Math.floor((new Date).getTime()/1e3),exp:Math.floor(s/1e3),iss:null,public_keys:[],domain_name:o,manifest_uri:n,redirect_uri:t,version:It,do_not_include_profile:!0,supports_hub_url:!0,scopes:r}),u=fe.SECP256K1Client.derivePublicKey(e);c.public_keys=[u];const l=ut(u);c.iss=dt(l);return new(0,fe.TokenSigner)("ES256k",e).sign(c)}async function Ot(e,t){const n=z(F(t)),r=JSON.parse(n),o=await Pt(e,r);if("string"!=typeof o)throw new Error("Unable to correctly decrypt private key");return o}async function Nt(e,t){const n=Object.assign({},t);let r;if(!n.publicKey){if(!n.privateKey)throw new Error("Either public key or private key must be supplied for encryption.");n.publicKey=lt(n.privateKey)}const o="boolean"==typeof n.wasString?n.wasString:"string"==typeof e,s="string"==typeof e?K(e):e,i=await kt(n.publicKey,s,o,n.cipherTextEncoding);let a=JSON.stringify(i);if(n.sign){"string"==typeof n.sign?r=n.sign:r||(r=n.privateKey);const e=Bt(r,a),t={signature:e.signature,publicKey:e.publicKey,cipherText:a};a=JSON.stringify(t)}return a}function jt(e,t){const n=Object.assign({},t);if(!n.privateKey)throw new Error("Private key is required for decryption.");try{const t=JSON.parse(e);return Pt(n.privateKey,t)}catch(e){throw e instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):e}}ge=u("70Xw9"),me=u("6XnWx"),we=u("7Rh2L");var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.b58ToC32=Lt.c32ToB58=Lt.versions=Lt.c32normalize=Lt.c32addressDecode=Lt.c32address=Lt.c32checkDecode=Lt.c32checkEncode=Lt.c32decode=Lt.c32encode=void 0;var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.c32decode=Dt.c32normalize=Dt.c32encode=Dt.c32=void 0;$e=u("3Bcdj");Dt.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const Rt="0123456789abcdef";function Ht(e){return e.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}Dt.c32encode=function(e,t){if(!e.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");e.length%2!=0&&(e=`0${e}`);let n=[],r=0;for(let t=(e=e.toLowerCase()).length-1;t>=0;t--)if(r<4){const o=Rt.indexOf(e[t])>>r;let s=0;0!==t&&(s=Rt.indexOf(e[t-1]));const i=1+r,a=s%(1<<i)<<5-i,c=Dt.c32[o+a];r=i,n.unshift(c)}else r=0;let o=0;for(let e=0;e<n.length&&"0"===n[e];e++)o++;n=n.slice(o);const s=(new TextDecoder).decode((0,$e.hexToBytes)(e)).match(/^\u0000*/),i=s?s[0].length:0;for(let e=0;e<i;e++)n.unshift(Dt.c32[0]);if(t){const e=t-n.length;for(let t=0;t<e;t++)n.unshift(Dt.c32[0])}return n.join("")},Dt.c32normalize=Ht,Dt.c32decode=function(e,t){if(!(e=Ht(e)).match(`^[${Dt.c32}]*$`))throw new Error("Not a c32-encoded string");const n=e.match(`^${Dt.c32[0]}*`),r=n?n[0].length:0;let o=[],s=0,i=0;for(let t=e.length-1;t>=0;t--){4===i&&(o.unshift(Rt[s]),i=0,s=0);const n=(Dt.c32.indexOf(e[t])<<i)+s,r=Rt[n%16];if(i+=1,s=n>>4,s>1<<i)throw new Error("Panic error in decoding.");o.unshift(r)}o.unshift(Rt[s]),o.length%2==1&&o.unshift("0");let a=0;for(let e=0;e<o.length&&"0"===o[e];e++)a++;o=o.slice(a-a%2);let c=o.join("");for(let e=0;e<r;e++)c=`00${c}`;if(t){const e=2*t-c.length;for(let t=0;t<e;t+=2)c=`00${c}`}return c},Object.defineProperty(Lt,"c32encode",{enumerable:!0,get:function(){return Dt.c32encode}}),Object.defineProperty(Lt,"c32decode",{enumerable:!0,get:function(){return Dt.c32decode}}),Object.defineProperty(Lt,"c32normalize",{enumerable:!0,get:function(){return Dt.c32normalize}});var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.c32checkDecode=Mt.c32checkEncode=void 0;me=u("6XnWx"),$e=u("3Bcdj");function Ft(e){const t=(0,me.sha256)((0,me.sha256)((0,$e.hexToBytes)(e)));return(0,$e.bytesToHex)(t.slice(0,4))}Mt.c32checkEncode=function(e,t){if(e<0||e>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!t.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");(t=t.toLowerCase()).length%2!=0&&(t=`0${t}`);let n=e.toString(16);1===n.length&&(n=`0${n}`);const r=Ft(`${n}${t}`),o=(0,Dt.c32encode)(`${t}${r}`);return`${Dt.c32[e]}${o}`},Mt.c32checkDecode=function(e){e=(0,Dt.c32normalize)(e);const t=(0,Dt.c32decode)(e.slice(1)),n=e[0],r=Dt.c32.indexOf(n),o=t.slice(-8);let s=r.toString(16);if(1===s.length&&(s=`0${s}`),Ft(`${s}${t.substring(0,t.length-8)}`)!==o)throw new Error("Invalid c32check string: checksum mismatch");return[r,t.substring(0,t.length-8)]},Object.defineProperty(Lt,"c32checkEncode",{enumerable:!0,get:function(){return Mt.c32checkEncode}}),Object.defineProperty(Lt,"c32checkDecode",{enumerable:!0,get:function(){return Mt.c32checkDecode}});var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.c32ToB58=Kt.b58ToC32=Kt.c32addressDecode=Kt.c32address=Kt.versions=void 0;var zt={};Object.defineProperty(zt,"__esModule",{value:!0}),zt.decode=zt.encode=void 0;me=u("6XnWx"),$e=u("3Bcdj");const Vt="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";zt.encode=function(e,t="00"){const n="string"==typeof e?(0,$e.hexToBytes)(e):e,r="string"==typeof t?(0,$e.hexToBytes)(t):e;if(!(n instanceof Uint8Array&&r instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const o=(0,me.sha256)((0,me.sha256)(new Uint8Array([...r,...n])));return Se(Vt).encode([...r,...n,...o.slice(0,4)])},zt.decode=function(e){const t=Se(Vt).decode(e),n=t.slice(0,1),r=t.slice(1,-4),o=(0,me.sha256)((0,me.sha256)(new Uint8Array([...n,...r])));return t.slice(-4).forEach(((e,t)=>{if(e!==o[t])throw new Error("Invalid checksum")})),{prefix:n,data:r}};$e=u("3Bcdj");Kt.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const Wt={};Wt[0]=Kt.versions.mainnet.p2pkh,Wt[5]=Kt.versions.mainnet.p2sh,Wt[111]=Kt.versions.testnet.p2pkh,Wt[196]=Kt.versions.testnet.p2sh;const qt={};function Gt(e,t){if(!t.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,Mt.c32checkEncode)(e,t)}`}function Jt(e){if(e.length<=5)throw new Error("Invalid c32 address: invalid length");if("S"!=e[0])throw new Error('Invalid c32 address: must start with "S"');return(0,Mt.c32checkDecode)(e.slice(1))}var Xt;qt[Kt.versions.mainnet.p2pkh]=0,qt[Kt.versions.mainnet.p2sh]=5,qt[Kt.versions.testnet.p2pkh]=111,qt[Kt.versions.testnet.p2sh]=196,Kt.c32address=Gt,Kt.c32addressDecode=Jt,Kt.b58ToC32=function(e,t=-1){const n=zt.decode(e),r=(0,$e.bytesToHex)(n.data),o=parseInt((0,$e.bytesToHex)(n.prefix),16);let s;return t<0?(s=o,void 0!==Wt[o]&&(s=Wt[o])):s=t,Gt(s,r)},Kt.c32ToB58=function(e,t=-1){const n=Jt(e),r=n[0],o=n[1];let s;t<0?(s=r,void 0!==qt[r]&&(s=qt[r])):s=t;let i=s.toString(16);return 1===i.length&&(i=`0${i}`),zt.encode(o,i)},Object.defineProperty(Lt,"c32address",{enumerable:!0,get:function(){return Kt.c32address}}),Object.defineProperty(Lt,"c32addressDecode",{enumerable:!0,get:function(){return Kt.c32addressDecode}}),Object.defineProperty(Lt,"c32ToB58",{enumerable:!0,get:function(){return Kt.c32ToB58}}),Object.defineProperty(Lt,"b58ToC32",{enumerable:!0,get:function(){return Kt.b58ToC32}}),Object.defineProperty(Lt,"versions",{enumerable:!0,get:function(){return Kt.versions}}),function(e){e[e.Testnet=2147483648]="Testnet",e[e.Mainnet=1]="Mainnet"}(Xt||(Xt={}));const Yt=Xt.Mainnet,Zt=128,Qt=128,en=16,tn=32,nn=65,rn=32,on=64,sn=34;var an,cn,un,ln,dn,hn,fn,pn;(cn=an||(an={}))[cn.Address=0]="Address",cn[cn.Principal=1]="Principal",cn[cn.LengthPrefixedString=2]="LengthPrefixedString",cn[cn.MemoString=3]="MemoString",cn[cn.AssetInfo=4]="AssetInfo",cn[cn.PostCondition=5]="PostCondition",cn[cn.PublicKey=6]="PublicKey",cn[cn.LengthPrefixedList=7]="LengthPrefixedList",cn[cn.Payload=8]="Payload",cn[cn.MessageSignature=9]="MessageSignature",cn[cn.StructuredDataSignature=10]="StructuredDataSignature",cn[cn.TransactionAuthField=11]="TransactionAuthField",(ln=un||(un={}))[ln.TokenTransfer=0]="TokenTransfer",ln[ln.SmartContract=1]="SmartContract",ln[ln.VersionedSmartContract=6]="VersionedSmartContract",ln[ln.ContractCall=2]="ContractCall",ln[ln.PoisonMicroblock=3]="PoisonMicroblock",ln[ln.Coinbase=4]="Coinbase",ln[ln.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",(hn=dn||(dn={}))[hn.Clarity1=1]="Clarity1",hn[hn.Clarity2=2]="Clarity2",(pn=fn||(fn={}))[pn.OnChainOnly=1]="OnChainOnly",pn[pn.OffChainOnly=2]="OffChainOnly",pn[pn.Any=3]="Any";const yn=["onChainOnly","offChainOnly","any"],gn={[yn[0]]:fn.OnChainOnly,[yn[1]]:fn.OffChainOnly,[yn[2]]:fn.Any,[fn.OnChainOnly]:fn.OnChainOnly,[fn.OffChainOnly]:fn.OffChainOnly,[fn.Any]:fn.Any};function mn(e){if(e in gn)return gn[e];throw new Error(`Invalid anchor mode "${e}", must be one of: ${yn.join(", ")}`)}var wn;!function(e){e[e.Mainnet=0]="Mainnet",e[e.Testnet=128]="Testnet"}(wn||(wn={}));wn.Mainnet;var bn,vn,xn,En,Sn,An,Cn,$n,Tn,kn,Pn,Bn,In,Un,_n,On,Nn,jn,Ln,Dn,Rn,Hn;function Mn(e){if(F(e).byteLength!=nn)throw Error("Invalid signature");return{type:an.MessageSignature,data:e}}function Fn(e,t){switch(e){case Cn.SerializeP2PKH:switch(t){case wn.Mainnet:return Tn.MainnetSingleSig;case wn.Testnet:return Tn.TestnetSingleSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(t)} for hashMode ${e}`)}case Cn.SerializeP2SH:case Cn.SerializeP2WPKH:case Cn.SerializeP2WSH:switch(t){case wn.Mainnet:return Tn.MainnetMultiSig;case wn.Testnet:return Tn.TestnetMultiSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(t)} for hashMode ${e}`)}default:throw new Error(`Unexpected hashMode ${JSON.stringify(e)}`)}}function Kn(e,t){return{type:an.Address,version:e,hash160:t}}function zn(e){return(0,Lt.c32address)(e.version,e.hash160)}(vn=bn||(bn={}))[vn.Allow=1]="Allow",vn[vn.Deny=2]="Deny",(En=xn||(xn={}))[En.STX=0]="STX",En[En.Fungible=1]="Fungible",En[En.NonFungible=2]="NonFungible",(An=Sn||(Sn={}))[An.Standard=4]="Standard",An[An.Sponsored=5]="Sponsored",($n=Cn||(Cn={}))[$n.SerializeP2PKH=0]="SerializeP2PKH",$n[$n.SerializeP2SH=1]="SerializeP2SH",$n[$n.SerializeP2WPKH=2]="SerializeP2WPKH",$n[$n.SerializeP2WSH=3]="SerializeP2WSH",(kn=Tn||(Tn={}))[kn.MainnetSingleSig=22]="MainnetSingleSig",kn[kn.MainnetMultiSig=20]="MainnetMultiSig",kn[kn.TestnetSingleSig=26]="TestnetSingleSig",kn[kn.TestnetMultiSig=21]="TestnetMultiSig",(Bn=Pn||(Pn={}))[Bn.Compressed=0]="Compressed",Bn[Bn.Uncompressed=1]="Uncompressed",(Un=In||(In={}))[Un.Equal=1]="Equal",Un[Un.Greater=2]="Greater",Un[Un.GreaterEqual=3]="GreaterEqual",Un[Un.Less=4]="Less",Un[Un.LessEqual=5]="LessEqual",(On=_n||(_n={}))[On.Sends=16]="Sends",On[On.DoesNotSend=17]="DoesNotSend",(jn=Nn||(Nn={}))[jn.Origin=1]="Origin",jn[jn.Standard=2]="Standard",jn[jn.Contract=3]="Contract",(Dn=Ln||(Ln={}))[Dn.STX=0]="STX",Dn[Dn.Fungible=1]="Fungible",Dn[Dn.NonFungible=2]="NonFungible",(Hn=Rn||(Rn={})).Serialization="Serialization",Hn.Deserialization="Deserialization",Hn.SignatureValidation="SignatureValidation",Hn.FeeTooLow="FeeTooLow",Hn.BadNonce="BadNonce",Hn.NotEnoughFunds="NotEnoughFunds",Hn.NoSuchContract="NoSuchContract",Hn.NoSuchPublicFunction="NoSuchPublicFunction",Hn.BadFunctionArgument="BadFunctionArgument",Hn.ContractAlreadyExists="ContractAlreadyExists",Hn.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",Hn.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",Hn.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",Hn.BadAddressVersionByte="BadAddressVersionByte",Hn.NoCoinbaseViaMempool="NoCoinbaseViaMempool",Hn.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",Hn.ServerFailureDatabase="ServerFailureDatabase",Hn.ServerFailureOther="ServerFailureOther";me=u("6XnWx"),we=u("7Rh2L");var Vn,Wn,qn=u("lnboJ");(Wn=Vn||(Vn={}))[Wn.Int=0]="Int",Wn[Wn.UInt=1]="UInt",Wn[Wn.Buffer=2]="Buffer",Wn[Wn.BoolTrue=3]="BoolTrue",Wn[Wn.BoolFalse=4]="BoolFalse",Wn[Wn.PrincipalStandard=5]="PrincipalStandard",Wn[Wn.PrincipalContract=6]="PrincipalContract",Wn[Wn.ResponseOk=7]="ResponseOk",Wn[Wn.ResponseErr=8]="ResponseErr",Wn[Wn.OptionalNone=9]="OptionalNone",Wn[Wn.OptionalSome=10]="OptionalSome",Wn[Wn.List=11]="List",Wn[Wn.Tuple=12]="Tuple",Wn[Wn.StringASCII=13]="StringASCII",Wn[Wn.StringUTF8=14]="StringUTF8";const Gn=e=>{if(e.length>1e6)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:Vn.Buffer,buffer:e}},Jn=e=>Gn(K(e));function Xn(e,t,n){const r=t||1,o=n||Zt;if(lo(e,o))throw new Error(`String length exceeds maximum bytes ${o}`);return{type:an.LengthPrefixedString,content:e,lengthPrefixBytes:r,maxLengthBytes:o}}function Yn(e){const t=(0,Lt.c32addressDecode)(e);return{type:an.Address,version:t[0],hash160:t[1]}}function Zn(e){if(e.includes(".")){const[t,n]=e.split(".");return Qn(t,n)}return er(e)}function Qn(e,t){const n=Yn(e),r=Xn(t);return{type:an.Principal,prefix:Nn.Contract,address:n,contractName:r}}function er(e){const t=Yn(e);return{type:an.Principal,prefix:Nn.Standard,address:t}}function tr(e){if(e.includes(".")){const[t,n]=e.split(".");return rr(t,n)}return nr(e)}function nr(e){const t=Yn(e);return{type:Vn.PrincipalStandard,address:t}}function rr(e,t){return or(Yn(e),Xn(t))}function or(e,t){if(K(t.content).byteLength>=128)throw new Error("Contract name must be less than 128 bytes");return{type:Vn.PrincipalContract,address:e,contractName:t}}const sr=()=>({type:Vn.BoolTrue}),ir=()=>({type:Vn.BoolFalse}),ar=BigInt("0xffffffffffffffffffffffffffffffff"),cr=BigInt(0),ur=BigInt("0x7fffffffffffffffffffffffffffffff"),lr=BigInt("-170141183460469231731687303715884105728"),dr=e=>{const t=O(e,!0);if(t>ur)throw new RangeError(`Cannot construct clarity integer from value greater than ${ur}`);if(t<lr)throw new RangeError(`Cannot construct clarity integer form value less than ${lr}`);return{type:Vn.Int,value:t}},hr=e=>{const t=O(e,!1);if(t<cr)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(t>ar)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${ar}`);return{type:Vn.UInt,value:t}};function fr(){return{type:Vn.OptionalNone}}function pr(e){return{type:Vn.OptionalSome,value:e}}function yr(e){return{type:Vn.ResponseErr,value:e}}function gr(e){for(const t in e)if(!bo(t))throw new Error(`"${t}" is not a valid Clarity name`);return{type:Vn.Tuple,data:e}}const mr=new Map;function wr(e,t){const n=mr.get(e);if(void 0!==n)return n(t);const r=function(e){const t=Object.values(e).filter((e=>"number"==typeof e)),n=new Set(t);return e=>n.has(e)}(e);return mr.set(e,r),wr(e,t)}class br{constructor(e){this.consumed=0,this.source=e}readBytes(e){const t=this.source.subarray(this.consumed,this.consumed+e);return this.consumed+=e,t}readUInt32BE(){return(e=this.readBytes(4))[t=0]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3];var e,t}readUInt8(){return ve(this.readBytes(1),0)}readUInt16BE(){return((e=this.readBytes(2))[(t=0)+0]<<8|e[t+1])>>>0;var e,t}readBigUIntLE(e){const t=M(this.readBytes(e).slice().reverse());return BigInt(`0x${t}`)}readBigUIntBE(e){const t=M(this.readBytes(e));return BigInt(`0x${t}`)}get readOffset(){return this.consumed}set readOffset(e){this.consumed=e}get internalBytes(){return this.source}readUInt8Enum(e,t){const n=this.readUInt8();if(wr(e,n))return n;throw t(n)}}class vr extends Error{constructor(e){super(e),this.message=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class xr extends vr{constructor(e){super(e)}}class Er extends vr{constructor(e){super(e)}}class Sr extends vr{constructor(e){super(e)}}class Ar extends vr{constructor(e){super(e)}}function Cr(e,t){return X([e,t])}function $r(e){const t=D(R(e.value,BigInt(Qt)),en);return Cr(e.type,t)}function Tr(e,t){const n=[],r="ascii"==t?V(e.data):K(e.data),o=new Uint8Array(4);return xe(o,r.length,0),n.push(o),n.push(r),Cr(e.type,X(n))}function kr(e){switch(e.type){case Vn.BoolTrue:case Vn.BoolFalse:return function(e){return new Uint8Array([e.type])}(e);case Vn.OptionalNone:case Vn.OptionalSome:return(t=e).type===Vn.OptionalNone?new Uint8Array([t.type]):Cr(t.type,kr(t.value));case Vn.Buffer:return function(e){const t=new Uint8Array(4);return xe(t,e.buffer.length,0),Cr(e.type,J(t,e.buffer))}(e);case Vn.UInt:return function(e){const t=D(e.value,en);return Cr(e.type,t)}(e);case Vn.Int:return $r(e);case Vn.PrincipalStandard:return function(e){return Cr(e.type,zr(e.address))}(e);case Vn.PrincipalContract:return function(e){return Cr(e.type,J(zr(e.address),Gr(e.contractName)))}(e);case Vn.ResponseOk:case Vn.ResponseErr:return function(e){return Cr(e.type,kr(e.value))}(e);case Vn.List:return function(e){const t=[],n=new Uint8Array(4);xe(n,e.list.length,0),t.push(n);for(const n of e.list){const e=kr(n);t.push(e)}return Cr(e.type,X(t))}(e);case Vn.Tuple:return function(e){const t=[],n=new Uint8Array(4);xe(n,Object.keys(e.data).length,0),t.push(n);const r=Object.keys(e.data).sort(((e,t)=>e.localeCompare(t)));for(const n of r){const r=Xn(n);t.push(Gr(r));const o=kr(e.data[n]);t.push(o)}return Cr(e.type,X(t))}(e);case Vn.StringASCII:return function(e){return Tr(e,"ascii")}(e);case Vn.StringUTF8:return function(e){return Tr(e,"utf8")}(e);default:throw new xr("Unable to serialize. Invalid Clarity Value.")}var t}function Pr(e,t,n){return"string"==typeof e&&(e=tr(e)),"string"==typeof n&&(n=Xr(n)),{type:an.Payload,payloadType:un.TokenTransfer,recipient:e,amount:O(t,!1),memo:n??Xr("")}}function Br(e,t,n,r){return"string"==typeof e&&(e=Yn(e)),"string"==typeof t&&(t=Xn(t)),"string"==typeof n&&(n=Xn(n)),{type:an.Payload,payloadType:un.ContractCall,contractAddress:e,contractName:t,functionName:n,functionArgs:r}}function Ir(e,t,n){return"string"==typeof e&&(e=Xn(e)),"string"==typeof t&&(t=Xn(t,4,1e5)),"number"==typeof n?{type:an.Payload,payloadType:un.VersionedSmartContract,clarityVersion:n,contractName:e,codeBody:t}:{type:an.Payload,payloadType:un.SmartContract,contractName:e,codeBody:t}}function Ur(e,t){if(e.byteLength!=tn)throw Error(`Coinbase buffer size must be ${tn} bytes`);return null!=t?{type:an.Payload,payloadType:un.CoinbaseToAltRecipient,coinbaseBytes:e,recipient:t}:{type:an.Payload,payloadType:un.Coinbase,coinbaseBytes:e}}function _r(e){const t=[];switch(t.push(e.payloadType),e.payloadType){case un.TokenTransfer:t.push(kr(e.recipient)),t.push(_(e.amount,!1,8)),t.push(Fr(e.memo));break;case un.ContractCall:t.push(Fr(e.contractAddress)),t.push(Fr(e.contractName)),t.push(Fr(e.functionName));const n=new Uint8Array(4);xe(n,e.functionArgs.length,0),t.push(n),e.functionArgs.forEach((e=>{t.push(kr(e))}));break;case un.SmartContract:t.push(Fr(e.contractName)),t.push(Fr(e.codeBody));break;case un.VersionedSmartContract:t.push(e.clarityVersion),t.push(Fr(e.contractName)),t.push(Fr(e.codeBody));break;case un.PoisonMicroblock:break;case un.Coinbase:t.push(e.coinbaseBytes);break;case un.CoinbaseToAltRecipient:t.push(e.coinbaseBytes),t.push(kr(e.recipient))}return X(t)}function Or(e){switch(e.readUInt8Enum(un,(e=>{throw new Error(`Cannot recognize PayloadType: ${e}`)}))){case un.TokenTransfer:return Pr(ao(e),O(e.readBytes(8),!1),Yr(e));case un.ContractCall:const t=Vr(e),n=Jr(e),r=Jr(e),o=[],s=e.readUInt32BE();for(let t=0;t<s;t++){const t=ao(e);o.push(t)}return Br(t,n,r,o);case un.SmartContract:return Ir(Jr(e),Jr(e,4,1e5));case un.VersionedSmartContract:{const t=e.readUInt8Enum(dn,(e=>{throw new Error(`Cannot recognize ClarityVersion: ${e}`)}));return Ir(Jr(e),Jr(e,4,1e5),t)}case un.PoisonMicroblock:return{type:an.Payload,payloadType:un.PoisonMicroblock};case un.Coinbase:return Ur(e.readBytes(tn));case un.CoinbaseToAltRecipient:return Ur(e.readBytes(tn),ao(e))}}var Nr,jr;function Lr(e){return Mn(M(e.readBytes(nn)))}function Dr(e,t){return{pubKeyEncoding:e,type:an.TransactionAuthField,contents:t}}function Rr(e){const t=e.readUInt8Enum(Nr,(e=>{throw new Er(`Could not read ${e} as AuthFieldType`)}));switch(t){case Nr.PublicKeyCompressed:return Dr(Pn.Compressed,Po(e));case Nr.PublicKeyUncompressed:return Dr(Pn.Uncompressed,Po(e));case Nr.SignatureCompressed:return Dr(Pn.Compressed,Lr(e));case Nr.SignatureUncompressed:return Dr(Pn.Uncompressed,Lr(e));default:throw new Error(`Unknown auth field type: ${JSON.stringify(t)}`)}}function Hr(e){return F(e.data)}function Mr(e){const t=[];switch(e.contents.type){case an.PublicKey:e.pubKeyEncoding==Pn.Compressed?(t.push(Nr.PublicKeyCompressed),t.push($o(e.contents))):(t.push(Nr.PublicKeyUncompressed),t.push($o(ko(e.contents.data))));break;case an.MessageSignature:e.pubKeyEncoding==Pn.Compressed?t.push(Nr.SignatureCompressed):t.push(Nr.SignatureUncompressed),t.push(Hr(e.contents))}return X(t)}function Fr(e){switch(e.type){case an.Address:return zr(e);case an.Principal:return Wr(e);case an.LengthPrefixedString:return Gr(e);case an.MemoString:return function(e){const t=[],n=K(e.content),r=uo(M(n),2*sn);return t.push(F(r)),X(t)}(e);case an.AssetInfo:return Zr(e);case an.PostCondition:return ro(e);case an.PublicKey:return $o(e);case an.LengthPrefixedList:return to(e);case an.Payload:return _r(e);case an.TransactionAuthField:return Mr(e);case an.MessageSignature:return Hr(e)}}function Kr(e,t,n,r){if(0===r.length)throw Error("Invalid number of public keys");if(!(t!==Cn.SerializeP2PKH&&t!==Cn.SerializeP2WPKH||1===r.length&&1===n))throw Error("Invalid number of public keys or signatures");if(t===Cn.SerializeP2WPKH||t===Cn.SerializeP2WSH)for(let e=0;e<r.length;e++)if(!Co(r[e]))throw Error("Public keys must be compressed for segwit");switch(t){case Cn.SerializeP2PKH:return Kn(e,yo(r[0].data));case Cn.SerializeP2WPKH:return Kn(e,go(r[0].data));case Cn.SerializeP2SH:return Kn(e,mo(n,r.map($o)));case Cn.SerializeP2WSH:return Kn(e,wo(n,r.map($o)))}}function zr(e){const t=[];return t.push(F(j(e.version,1))),t.push(F(e.hash160)),X(t)}function Vr(e){const t=L(M(e.readBytes(1))),n=M(e.readBytes(20));return{type:an.Address,version:t,hash160:n}}function Wr(e){const t=[];return t.push(e.prefix),t.push(zr(e.address)),e.prefix===Nn.Contract&&t.push(Gr(e.contractName)),X(t)}function qr(e){const t=e.readUInt8Enum(Nn,(e=>{throw new Er(`Unexpected Principal payload type: ${e}`)})),n=Vr(e);if(t===Nn.Standard)return{type:an.Principal,prefix:t,address:n};const r=Jr(e);return{type:an.Principal,prefix:t,address:n,contractName:r}}function Gr(e){const t=[],n=K(e.content),r=n.byteLength;return t.push(F(j(r,e.lengthPrefixBytes))),t.push(n),X(t)}function Jr(e,t,n){t=t||1;const r=L(M(e.readBytes(t)));return Xn(z(e.readBytes(r)),t,n??128)}function Xr(e){if(e&&lo(e,sn))throw new Error(`Memo exceeds maximum length of ${sn} bytes`);return{type:an.MemoString,content:e}}function Yr(e){const t=z(e.readBytes(sn));return{type:an.MemoString,content:t}}function Zr(e){const t=[];return t.push(zr(e.address)),t.push(Gr(e.contractName)),t.push(Gr(e.assetName)),X(t)}function Qr(e){return{type:an.AssetInfo,address:Vr(e),contractName:Jr(e),assetName:Jr(e)}}function eo(e,t){return{type:an.LengthPrefixedList,lengthPrefixBytes:t||4,values:e}}function to(e){const t=e.values,n=[];n.push(F(j(t.length,e.lengthPrefixBytes)));for(const e of t)n.push(Fr(e));return X(n)}function no(e,t,n){const r=L(M(e.readBytes(n||4))),o=[];for(let n=0;n<r;n++)switch(t){case an.Address:o.push(Vr(e));break;case an.LengthPrefixedString:o.push(Jr(e));break;case an.MemoString:o.push(Yr(e));break;case an.AssetInfo:o.push(Qr(e));break;case an.PostCondition:o.push(oo(e));break;case an.PublicKey:o.push(Po(e));break;case an.TransactionAuthField:o.push(Rr(e))}return eo(o,n)}function ro(e){const t=[];return t.push(e.conditionType),t.push(Wr(e.principal)),e.conditionType!==xn.Fungible&&e.conditionType!==xn.NonFungible||t.push(Zr(e.assetInfo)),e.conditionType===xn.NonFungible&&t.push(kr(e.assetName)),t.push(e.conditionCode),e.conditionType!==xn.STX&&e.conditionType!==xn.Fungible||t.push(_(e.amount,!1,8)),X(t)}function oo(e){const t=e.readUInt8Enum(xn,(e=>{throw new Er(`Could not read ${e} as PostConditionType`)})),n=qr(e);let r,o,s;switch(t){case xn.STX:return r=e.readUInt8Enum(In,(e=>{throw new Er(`Could not read ${e} as FungibleConditionCode`)})),s=BigInt(`0x${M(e.readBytes(8))}`),{type:an.PostCondition,conditionType:xn.STX,principal:n,conditionCode:r,amount:s};case xn.Fungible:return o=Qr(e),r=e.readUInt8Enum(In,(e=>{throw new Er(`Could not read ${e} as FungibleConditionCode`)})),s=BigInt(`0x${M(e.readBytes(8))}`),{type:an.PostCondition,conditionType:xn.Fungible,principal:n,conditionCode:r,amount:s,assetInfo:o};case xn.NonFungible:o=Qr(e);const t=ao(e);return r=e.readUInt8Enum(_n,(e=>{throw new Er(`Could not read ${e} as FungibleConditionCode`)})),{type:an.PostCondition,conditionType:xn.NonFungible,principal:n,conditionCode:r,assetInfo:o,assetName:t}}}(jr=Nr||(Nr={}))[jr.PublicKeyCompressed=0]="PublicKeyCompressed",jr[jr.PublicKeyUncompressed=1]="PublicKeyUncompressed",jr[jr.SignatureCompressed=2]="SignatureCompressed",jr[jr.SignatureUncompressed=3]="SignatureUncompressed";const so=e=>({type:Vn.StringASCII,data:e}),io=e=>({type:Vn.StringUTF8,data:e});function ao(e){let t;if("string"==typeof e){const n="0x"===e.slice(0,2).toLowerCase();t=new br(F(n?e.slice(2):e))}else t=e instanceof Uint8Array?new br(e):e;switch(t.readUInt8Enum(Vn,(e=>{throw new Er(`Cannot recognize Clarity Type: ${e}`)}))){case Vn.Int:return dr(t.readBytes(16));case Vn.UInt:return hr(t.readBytes(16));case Vn.Buffer:const e=t.readUInt32BE();return Gn(t.readBytes(e));case Vn.BoolTrue:return sr();case Vn.BoolFalse:return ir();case Vn.PrincipalStandard:const s=Vr(t);return o=s,{type:Vn.PrincipalStandard,address:o};case Vn.PrincipalContract:return or(Vr(t),Jr(t));case Vn.ResponseOk:return r=ao(t),{type:Vn.ResponseOk,value:r};case Vn.ResponseErr:return yr(ao(t));case Vn.OptionalNone:return fr();case Vn.OptionalSome:return pr(ao(t));case Vn.List:const i=t.readUInt32BE(),a=[];for(let e=0;e<i;e++)a.push(ao(t));return n=a,{type:Vn.List,list:n};case Vn.Tuple:const c=t.readUInt32BE(),u={};for(let e=0;e<c;e++){const e=Jr(t).content;if(void 0===e)throw new Er('"content" is undefined');u[e]=ao(t)}return gr(u);case Vn.StringASCII:const l=t.readUInt32BE(),d=W(t.readBytes(l));return so(d);case Vn.StringUTF8:const h=t.readUInt32BE(),f=z(t.readBytes(h));return io(f);default:throw new Er("Unable to deserialize Clarity Value from Uint8Array. Could not find valid Clarity Type.")}var n,r,o}we=u("7Rh2L");const co=e=>e.length%2==0?e:`0${e}`,uo=(e,t)=>e.padEnd(t,"0"),lo=(e,t)=>!!e&&K(e).length>t;function ho(e){return n(qn)(e)}const fo=e=>M((0,Me.sha512_256)(e)),po=e=>(0,Ae.ripemd160)((0,me.sha256)(e)),yo=e=>M(po(e)),go=e=>{const t=po(e),n=J(new Uint8Array([0]),new Uint8Array([t.length]),t);return M(po(n))},mo=(e,t)=>{if(e>15||t.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");const n=[];n.push(80+e),t.forEach((e=>{n.push(e.length),n.push(e)})),n.push(80+t.length),n.push(174);const r=X(n);return M(po(r))},wo=(e,t)=>{if(e>15||t.length>15)throw Error("P2WSH multisig address can only contain up to 15 public keys");const n=[];n.push(80+e),t.forEach((e=>{n.push(e.length),n.push(e)})),n.push(80+t.length),n.push(174);const r=X(n),o=(0,me.sha256)(r),s=[];s.push(0),s.push(o.length),s.push(o);const i=X(s);return M(po(i))};function bo(e){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(e)&&e.length<128}const vo=e=>{if(e.okay)return ao(e.result);throw new Error(e.cause)};function xo(e,t=wn.Mainnet){e="string"==typeof e?e:M(e);return zn(Kn(Fn(Cn.SerializeP2PKH,t),yo(F(e))))}function Eo(e){return{type:an.PublicKey,data:F(e)}}function So(e,t,n=Pn.Compressed){const r=bt(t.data),o=new(0,we.Signature)(N(r.r),N(r.s)),s=we.Point.fromSignature(e,o,r.recoveryId),i=n===Pn.Compressed;return s.toHex(i)}function Ao(e){return{type:an.PublicKey,data:e}}function Co(e){return!M(e.data).startsWith("04")}function $o(e){return e.data.slice()}function To(e){const t=Bo(e);return Eo(M((0,we.getPublicKey)(t.data.slice(0,32),t.compressed)))}function ko(e){const t="string"==typeof e?e:M(e);return Eo(we.Point.fromHex(t).toHex(!0))}function Po(e){const t=e.readUInt8(),n=4!==t?rn:on;return Ao(X([t,e.readBytes(n)]))}function Bo(e){const t=be(e);return{data:t,compressed:t.length==l}}function Io(e,t){const[n,r]=(0,we.signSync)(t,e.data.slice(0,32),{canonical:!0,recovered:!0});if(null==r)throw new Error("No signature recoveryId received");return Mn(j(r,1)+we.Signature.fromHex(n).toCompactHex())}function Uo(e){return To(e.data)}function _o(e,t=null){let n;n=t?function(e,t){const n=(0,fe.decodeToken)(e),r=n.payload;if("string"==typeof r)throw new Error("Unexpected token payload type of string");if(!r.hasOwnProperty("subject")||!r.subject)throw new Error("Token doesn't have a subject");if(!r.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key");if(!r.hasOwnProperty("issuer")||!r.issuer)throw new Error("Token doesn't have an issuer");if(!r.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key");if(!r.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");const o=r.issuer.publicKey,s=xo(o);if(t===o);else if(t!==s)throw new Error("Token issuer public key does not match the verifying value");const i=new(0,fe.TokenVerifier)(n.header.alg,o);if(!i)throw new Error("Invalid token verifier");if(!i.verify(e))throw new Error("Token verification failed");return n}(e,t):(0,fe.decodeToken)(e);let r={};if(n.hasOwnProperty("payload")){const e=n.payload;if("string"==typeof e)throw new Error("Unexpected token payload type of string");e.hasOwnProperty("claim")&&(r=e.claim)}return r}we.utils.hmacSha256Sync=(e,...t)=>{const n=ge.hmac.create(me.sha256,e);return t.forEach((e=>n.update(e))),n.digest()};const Oo="_blockstackDidCheckEchoReply";function No(){let e;if("undefined"!=typeof self)e=self;else{if("undefined"==typeof window)return!1;e=window}if(!e.location||!e.localStorage)return!1;const t=e[Oo];if("boolean"==typeof t)return t;const n=(r=e.location.search)?(/^[?#]/.test(r)?r.slice(1):r).split("&").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r?decodeURIComponent(r.replace(/\+/g," ")):"",e}),{}):{};var r;const o=n.echoReply;if(o){e[Oo]=!0;const t=`echo-reply-${o}`;return e.localStorage.setItem(t,"success"),e.setTimeout((()=>{const t=n.authContinuation;e.location.href=t}),10),!0}return!1}class jo{constructor(e){let t=!0;if("undefined"==typeof window&&"undefined"==typeof self&&(t=!1),e&&e.appConfig)this.appConfig=e.appConfig;else{if(!t)throw new ne("You need to specify options.appConfig");this.appConfig=new Q}e&&e.sessionStore?this.store=e.sessionStore:this.store=t?e?new he(e.sessionOptions):new he:e?new de(e.sessionOptions):new de}makeAuthRequestToken(e,t,n,r,o,s=T().getTime(),i={}){const a=this.appConfig;if(!a)throw new ie("Missing AppConfig");return _t(e=e||this.generateAndStoreTransitKey(),t=t||a.redirectURI(),n=n||a.manifestURI(),r=r||a.scopes,o=o||a.appDomain,s,i)}generateAndStoreTransitKey(){const e=this.store.getSessionData(),t=Ut();return e.transitKey=t,this.store.setSessionData(e),t}getAuthResponseToken(){const e=U("location",{throwIfUnavailable:!0,usageDesc:"getAuthResponseToken"})?.search;return new URLSearchParams(e).get("authResponse")??""}isSignInPending(){try{if(No())return C.info("protocolEchoReply detected from isSignInPending call, the page is about to redirect."),!0}catch(e){C.error(`Error checking for protocol echo reply isSignInPending: ${e}`)}return!!this.getAuthResponseToken()}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(e=this.getAuthResponseToken(),t=p()){const n=this.store.getSessionData();if(n.userData)throw new oe("Existing user session found.");const r=this.store.getSessionData().transitKey;let o=this.appConfig&&this.appConfig.coreNode;if(!o){o=(new m).bnsLookupUrl}const s=(0,fe.decodeToken)(e).payload;if("string"==typeof s)throw new Error("Unexpected token payload type of string");if(!await mt(e))throw new oe("Invalid authentication response.");let i=s.private_key,a=s.core_token;if(k(s.version,"1.1.0")){if(void 0===r||null==r)throw new oe("Authenticating with protocol > 1.1.0 requires transit key, and none found.");if(void 0!==s.private_key&&null!==s.private_key)try{i=await Ot(r,s.private_key)}catch(e){if(C.warn("Failed decryption of appPrivateKey, will try to use as given"),c=s.private_key,!we.utils.isValidPrivateKey(be(c)))throw new oe("Failed decrypting appPrivateKey. Usually means that the transit key has changed during login.")}if(null!=a)try{a=await Ot(r,a)}catch(e){C.info("Failed decryption of coreSessionToken, will try to use as given")}}var c;let u,l="https://hub.blockstack.org";k(s.version,"1.2.0")&&null!==s.hubUrl&&void 0!==s.hubUrl&&(l=s.hubUrl),k(s.version,"1.3.0")&&null!==s.associationToken&&void 0!==s.associationToken&&(u=s.associationToken);const d={profile:s.profile,email:s.email,decentralizedID:s.iss,identityAddress:ht(s.iss),appPrivateKey:i,coreSessionToken:a,authResponseToken:e,hubUrl:l,appPrivateKeyFromWalletSalt:s.appPrivateKeyFromWalletSalt,coreNode:s.blockstackAPIUrl,gaiaAssociationToken:u},h=s.profile_url;if(!d.profile&&h){const e=await t(h);if(e.ok){const t=await e.text(),n=JSON.parse(t);d.profile=_o(n[0].token)}else d.profile=Object.assign({},Y)}else d.profile=s.profile;return n.userData=d,this.store.setSessionData(n),d}loadUserData(){const e=this.store.getSessionData().userData;if(!e)throw new ie("No user data found. Did the user sign in?");return e}encryptContent(e,t){const n=Object.assign({},t);return n.privateKey||(n.privateKey=this.loadUserData().appPrivateKey),Nt(e,n)}decryptContent(e,t){const n=Object.assign({},t);return n.privateKey||(n.privateKey=this.loadUserData().appPrivateKey),jt(e,n)}signUserOut(e){this.store.deleteSessionData(),e&&"undefined"!=typeof location&&location.href&&(location.href=e)}}function Lo(){return{type:an.MessageSignature,data:M(new Uint8Array(nn))}}function Do(e,t,n,r){const o=Kr(0,e,1,[Eo(t)]).hash160,s=Co(Eo(t))?Pn.Compressed:Pn.Uncompressed;return{hashMode:e,signer:o,nonce:O(n,!1),fee:O(r,!1),keyEncoding:s,signature:Lo()}}function Ro(e){return"signature"in e}function Ho(e){const t=ho(e);return t.nonce=0,t.fee=0,Ro(t)?t.signature=Lo():t.fields=[],{...t,nonce:BigInt(0),fee:BigInt(0)}}function Mo(e){return Ro(e)?function(e){return X([e.hashMode,F(e.signer),_(e.nonce,!1,8),_(e.fee,!1,8),e.keyEncoding,Hr(e.signature)])}(e):function(e){const t=[e.hashMode,F(e.signer),_(e.nonce,!1,8),_(e.fee,!1,8)],n=eo(e.fields);t.push(to(n));const r=new Uint8Array(2);var o,s,i;return o=r,s=e.signaturesRequired,o[0+(i=0)]=s>>>8,o[i+1]=s>>>0,t.push(r),X(t)}(e)}function Fo(e){const t=e.readUInt8Enum(Cn,(e=>{throw new Er(`Could not parse ${e} as AddressHashMode`)}));return t===Cn.SerializeP2PKH||t===Cn.SerializeP2WPKH?function(e,t){const n=M(t.readBytes(20)),r=BigInt(`0x${M(t.readBytes(8))}`),o=BigInt(`0x${M(t.readBytes(8))}`),s=t.readUInt8Enum(Pn,(e=>{throw new Er(`Could not parse ${e} as PubKeyEncoding`)}));if(e===Cn.SerializeP2WPKH&&s!=Pn.Compressed)throw new Er("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");return{hashMode:e,signer:n,nonce:r,fee:o,keyEncoding:s,signature:Lr(t)}}(t,e):function(e,t){const n=M(t.readBytes(20)),r=BigInt("0x"+M(t.readBytes(8))),o=BigInt("0x"+M(t.readBytes(8))),s=no(t,an.TransactionAuthField).values;let i=!1,a=0;for(const e of s)switch(e.contents.type){case an.PublicKey:Co(e.contents)||(i=!0);break;case an.MessageSignature:if(e.pubKeyEncoding===Pn.Uncompressed&&(i=!0),a+=1,65536===a)throw new Ar("Failed to parse multisig spending condition: too many signatures")}const c=t.readUInt16BE();if(i&&e===Cn.SerializeP2SH)throw new Ar("Uncompressed keys are not allowed in this hash mode");return{hashMode:e,signer:n,nonce:r,fee:o,fields:s,signaturesRequired:c}}(t,e)}function Ko(e,t,n,r){const o=e+M(new Uint8Array([t]))+M(_(n,!1,8))+M(_(r,!1,8));if(49!==F(o).byteLength)throw Error("Invalid signature hash length");return fo(F(o))}function zo(e,t,n){const r=33+nn,o=Co(t)?Pn.Compressed:Pn.Uncompressed,s=F(e+co(o.toString(16))+n.data);if(s.byteLength>r)throw Error("Invalid signature hash length");return fo(s)}function Vo(e,t,n,r,o){const s=Ko(e,t,n,r),i=Io(o,s);return{nextSig:i,nextSigHash:zo(s,Uo(o),i)}}function Wo(e,t,n,r,o,s){const i=Ko(e,t,n,r),a=Eo(So(i,s,o));return{pubKey:a,nextSigHash:zo(i,a,s)}}function qo(){const e=Do(Cn.SerializeP2PKH,"",0,0);return e.signer=(an.Address,Tn.MainnetSingleSig,"0".repeat(40)),e.keyEncoding=Pn.Compressed,e.signature=Lo(),e}function Go(e,t,n){return Ro(e)?function(e,t,n){const{pubKey:r,nextSigHash:o}=Wo(t,n,e.fee,e.nonce,e.keyEncoding,e.signature),s=Kr(0,e.hashMode,1,[r]).hash160;if(s!==e.signer)throw new Ar(`Signer hash does not equal hash of public key(s): ${s} != ${e.signer}`);return o}(e,t,n):function(e,t,n){const r=[];let o=t,s=!1,i=0;for(const t of e.fields){let a;switch(t.contents.type){case an.PublicKey:Co(t.contents)||(s=!0),a=t.contents;break;case an.MessageSignature:t.pubKeyEncoding===Pn.Uncompressed&&(s=!0);const{pubKey:r,nextSigHash:c}=Wo(o,n,e.fee,e.nonce,t.pubKeyEncoding,t.contents);if(o=c,a=r,i+=1,65536===i)throw new Ar("Too many signatures")}r.push(a)}if(i!==e.signaturesRequired)throw new Ar("Incorrect number of signatures");if(s&&e.hashMode===Cn.SerializeP2SH)throw new Ar("Uncompressed keys are not allowed in this hash mode");const a=Kr(0,e.hashMode,e.signaturesRequired,r).hash160;if(a!==e.signer)throw new Ar(`Signer hash does not equal hash of public key(s): ${a} != ${e.signer}`);return o}(e,t,n)}function Jo(e){return{authType:Sn.Standard,spendingCondition:e}}function Xo(e,t){return{authType:Sn.Sponsored,spendingCondition:e,sponsorSpendingCondition:t||Do(Cn.SerializeP2PKH,"0".repeat(66),0,0)}}function Yo(e){if(e.spendingCondition)switch(e.authType){case Sn.Standard:return Jo(Ho(e.spendingCondition));case Sn.Sponsored:return Xo(Ho(e.spendingCondition),qo());default:throw new Sr("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function Zo(e,t){switch(e.authType){case Sn.Standard:case Sn.Sponsored:return Go(e.spendingCondition,t,Sn.Standard);default:throw new Sr("Invalid origin auth type")}}function Qo(e,t){switch(e.authType){case Sn.Standard:const n={...e.spendingCondition,fee:O(t,!1)};return{...e,spendingCondition:n};case Sn.Sponsored:const r={...e.sponsorSpendingCondition,fee:O(t,!1)};return{...e,sponsorSpendingCondition:r}}}function es(e,t){const n={...e.spendingCondition,nonce:O(t,!1)};return{...e,spendingCondition:n}}function ts(e,t){const n={...e.sponsorSpendingCondition,nonce:O(t,!1)};return{...e,sponsorSpendingCondition:n}}function ns(e,t){return{...e,sponsorSpendingCondition:{...t,nonce:O(t.nonce,!1),fee:O(t.fee,!1)}}}function rs(e){const t=[];switch(t.push(e.authType),e.authType){case Sn.Standard:t.push(Mo(e.spendingCondition));break;case Sn.Sponsored:t.push(Mo(e.spendingCondition)),t.push(Mo(e.sponsorSpendingCondition))}return X(t)}function os(e){let t;switch(e.readUInt8Enum(Sn,(e=>{throw new Er(`Could not parse ${e} as AuthType`)}))){case Sn.Standard:return t=Fo(e),Jo(t);case Sn.Sponsored:t=Fo(e);return Xo(t,Fo(e))}}jo.prototype.makeAuthRequest=jo.prototype.makeAuthRequestToken;class ss{constructor(e,t,n,r,o,s,i){if(this.version=e,this.auth=t,this.payload="amount"in n?{...n,amount:O(n.amount,!1)}:n,this.chainId=i??Yt,this.postConditionMode=o??bn.Deny,this.postConditions=r??eo([]),s)this.anchorMode=mn(s);else switch(n.payloadType){case un.Coinbase:case un.CoinbaseToAltRecipient:case un.PoisonMicroblock:this.anchorMode=fn.OnChainOnly;break;case un.ContractCall:case un.SmartContract:case un.VersionedSmartContract:case un.TokenTransfer:this.anchorMode=fn.Any}}signBegin(){const e=ho(this);return e.auth=Yo(e.auth),e.txid()}verifyBegin(){const e=ho(this);return e.auth=Yo(e.auth),e.txid()}verifyOrigin(){return Zo(this.auth,this.verifyBegin())}signNextOrigin(e,t){if(void 0===this.auth.spendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,e,Sn.Standard,t)}signNextSponsor(e,t){if(this.auth.authType===Sn.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,e,Sn.Sponsored,t);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(e){const t=this.auth.spendingCondition;if(!t||Ro(t))throw new Error("Can't append public key to a singlesig condition");{const n=Co(e);t.fields.push(Dr(n?Pn.Compressed:Pn.Uncompressed,e))}}signAndAppend(e,t,n,r){const{nextSig:o,nextSigHash:s}=Vo(t,n,e.fee,e.nonce,r);if(Ro(e))e.signature=o;else{const t=M(r.data).endsWith("01");e.fields.push(Dr(t?Pn.Compressed:Pn.Uncompressed,o))}return s}txid(){const e=this.serialize();return fo(e)}setSponsor(e){if(this.auth.authType!=Sn.Sponsored)throw new Sr("Cannot sponsor sign a non-sponsored transaction");this.auth=ns(this.auth,e)}setFee(e){this.auth=Qo(this.auth,e)}setNonce(e){this.auth=es(this.auth,e)}setSponsorNonce(e){if(this.auth.authType!=Sn.Sponsored)throw new Sr("Cannot sponsor sign a non-sponsored transaction");this.auth=ts(this.auth,e)}serialize(){if(void 0===this.version)throw new xr('"version" is undefined');if(void 0===this.chainId)throw new xr('"chainId" is undefined');if(void 0===this.auth)throw new xr('"auth" is undefined');if(void 0===this.anchorMode)throw new xr('"anchorMode" is undefined');if(void 0===this.payload)throw new xr('"payload" is undefined');const e=[];e.push(this.version);const t=new Uint8Array(4);return xe(t,this.chainId,0),e.push(t),e.push(rs(this.auth)),e.push(this.anchorMode),e.push(this.postConditionMode),e.push(to(this.postConditions)),e.push(_r(this.payload)),X(e)}}function is(e){let t;t="string"==typeof e?"0x"===e.slice(0,2).toLowerCase()?new br(F(e.slice(2))):new br(F(e)):e instanceof Uint8Array?new br(e):e;const n=t.readUInt8Enum(wn,(e=>{throw new Error(`Could not parse ${e} as TransactionVersion`)})),r=t.readUInt32BE(),o=os(t),s=t.readUInt8Enum(fn,(e=>{throw new Error(`Could not parse ${e} as AnchorMode`)})),i=t.readUInt8Enum(bn,(e=>{throw new Error(`Could not parse ${e} as PostConditionMode`)})),a=no(t,an.PostCondition),c=Or(t);return new ss(n,o,c,a,i,s,r)}var as=u("7YFNV");as=u("7YFNV");const cs=(e,t)=>"undefined"==typeof window?Promise.resolve():(0,as.p)().then((()=>(0,as.b)([["connect-modal",[[1,"connect-modal",{authOptions:[16],hasOpenedInstall:[32],hasOpenedInstallXverse:[32]}]]]],t)));!function(){if("undefined"!=typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}();var us=Object.defineProperty,ls=Object.defineProperties,ds=Object.getOwnPropertyDescriptors,hs=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable,ys=(e,t,n)=>t in e?us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gs=(e,t)=>{for(var n in t||(t={}))fs.call(t,n)&&ys(e,n,t[n]);if(hs)for(var n of hs(t))ps.call(t,n)&&ys(e,n,t[n]);return e},ms=(e,t)=>ls(e,ds(t)),ws=(e,t)=>{var n={};for(var r in e)fs.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&hs)for(var r of hs(e))t.indexOf(r)<0&&ps.call(e,r)&&(n[r]=e[r]);return n};function bs(){return window.StacksProvider||window.BlockstackProvider}var vs="7.3.1";"undefined"!=typeof window&&(window.__CONNECT_VERSION__=vs);var xs=e=>{if(!e){let t=new Q(["store_write"],document.location.href);e=new jo({appConfig:t})}return e},Es=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ss(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n of e)t+=Es[n];return t}var As,Cs,$s=((Cs=$s||{}).ContractCall="contract_call",Cs.ContractDeploy="smart_contract",Cs.STXTransfer="token_transfer",Cs),Ts=((As=Ts||{}).BUFFER="buffer",As.UINT="uint",As.INT="int",As.PRINCIPAL="principal",As.BOOL="bool",As),ks=e=>{let t=e;if(!t){let e=new Q(["store_write"],document.location.href);t=new jo({appConfig:e})}return t};function Ps(e){try{return ks(e).loadUserData().appPrivateKey}catch(e){return!1}}var Bs=e=>{let t=ks(e).loadUserData().appPrivateKey;return{privateKey:t,publicKey:fe.SECP256K1Client.derivePublicKey(t)}};function Is(e){var t;let{stxAddress:n,userSession:r,network:o}=e;if(n)return n;if(!r||!o)return;let s=null==(t=null==r?void 0:r.loadUserData().profile)?void 0:t.stxAddress,i={[Xt.Mainnet]:"mainnet",[Xt.Testnet]:"testnet"};return null==s?void 0:s[i[o.chainId]]}function Us(e){return e.map((e=>Ss(ro(e))))}async function _s(e,t){let{postConditions:n}=e;return n&&"string"!=typeof n[0]&&(n=Us(n)),new(0,fe.TokenSigner)("ES256k",t).signAsync(ms(gs({},e),{postConditions:n}))}function Os(e){let{postConditions:t}=e;return t&&"string"!=typeof t[0]&&(t=Us(t)),(0,fe.createUnsecuredToken)(ms(gs({},e),{postConditions:t}))}var Ns=async({token:e,options:t})=>{var n,r,o;let s=bs();if(!s)throw new Error("Hiro Wallet not installed");try{let o=await s.transactionRequest(e),{txRaw:i}=o,a=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);let t=e.length%2?`0${e}`:e,n=new Uint8Array(t.length/2);for(let e=0;e<n.length;e++){let r=2*e,o=t.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[e]=s}return n}(i.replace(/^0x/,"")),c=is(a);if("sponsored"in t&&t.sponsored)return void(null==(n=t.onFinish)||n.call(t,ms(gs({},o),{stacksTransaction:c})));null==(r=t.onFinish)||r.call(t,ms(gs({},o),{stacksTransaction:c}))}catch(e){console.error("[Connect] Error during transaction request",e),null==(o=t.onCancel)||o.call(t)}},js=async e=>{let t=e,{functionArgs:n,appDetails:r,userSession:o}=t,s=ws(t,["functionArgs","appDetails","userSession"]),i=n.map((e=>"string"==typeof e?e:Ss(kr(e))));if(Ps(o)){let{privateKey:e,publicKey:t}=Bs(o),n=ms(gs({},s),{functionArgs:i,txType:"contract_call",publicKey:t});return r&&(n.appDetails=r),_s(n,e)}let a=ms(gs({},s),{functionArgs:i,txType:"contract_call"});return r&&(a.appDetails=r),Os(a)};async function Ls(e,t){let n=await t(gs(gs({},function(e){let t=e.network||new w,n=ks(e.userSession),r=ms(gs({},e),{network:t,userSession:n});return gs({stxAddress:Is(r)},r)}(e)),e));return Ns({token:n,options:e})}function Ds(e){return Ls(e,js)}var Rs=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY",e))(Rs||{}),Hs=e=>{if(bs())(async e=>{let t=bs();if(!t)throw new Error("Unable to authenticate without Hiro Wallet extension");let{redirectTo:n="/",manifestPath:r,onFinish:o,onCancel:s,sendToSignIn:i=!1,userSession:a,appDetails:c}=e,u=xs(a);u.isUserSignedIn()&&u.signUserOut();let l=u.generateAndStoreTransitKey(),d=u.makeAuthRequest(l,`${document.location.origin}${n}`,`${document.location.origin}${r}`,u.appConfig.scopes,void 0,void 0,{sendToSignIn:i,appDetails:c,connectVersion:vs});try{let e=await t.authenticationRequest(d);await u.handlePendingSignIn(e);let n=(0,fe.decodeToken)(e),r=null==n?void 0:n.payload;null==o||o({authResponse:e,authResponsePayload:r,userSession:u})}catch(e){console.error("[Connect] Error during auth request",e),null==s||s()}})(e);else{window;{cs(window);let t=document.createElement("connect-modal");t.authOptions=e,document.body.appendChild(t);let n=e=>{"Escape"===e.key&&(document.removeEventListener("keydown",n),t.remove())};document.addEventListener("keydown",n)}}};const Ms=new Q(["store_write","publish_data"]),Fs=new jo({appConfig:Ms});var Ks,zs;(zs=Ks||(Ks={}))[zs.ClarityAbiTypeUInt128=1]="ClarityAbiTypeUInt128",zs[zs.ClarityAbiTypeInt128=2]="ClarityAbiTypeInt128",zs[zs.ClarityAbiTypeBool=3]="ClarityAbiTypeBool",zs[zs.ClarityAbiTypePrincipal=4]="ClarityAbiTypePrincipal",zs[zs.ClarityAbiTypeNone=5]="ClarityAbiTypeNone",zs[zs.ClarityAbiTypeBuffer=6]="ClarityAbiTypeBuffer",zs[zs.ClarityAbiTypeResponse=7]="ClarityAbiTypeResponse",zs[zs.ClarityAbiTypeOptional=8]="ClarityAbiTypeOptional",zs[zs.ClarityAbiTypeTuple=9]="ClarityAbiTypeTuple",zs[zs.ClarityAbiTypeList=10]="ClarityAbiTypeList",zs[zs.ClarityAbiTypeStringAscii=11]="ClarityAbiTypeStringAscii",zs[zs.ClarityAbiTypeStringUtf8=12]="ClarityAbiTypeStringUtf8",zs[zs.ClarityAbiTypeTraitReference=13]="ClarityAbiTypeTraitReference";function Vs(e,t,n){return"string"==typeof e&&(e=Zn(e)),{type:an.PostCondition,conditionType:xn.STX,principal:e,conditionCode:t,amount:O(n,!1)}}function Ws(e,t,n){return Vs(er(e),t,n)}function qs(e,t,n,r){return Vs(Qn(e,t),n,r)}async function Gs(e){const t={network:new m},n=Object.assign(t,e),{contractName:r,contractAddress:o,functionName:s,functionArgs:i,senderAddress:a}=n,c=g.fromNameOrNetwork(n.network),u=c.getReadOnlyFunctionCallApiUrl(o,r,s),l=i.map((e=>`0x${M(kr(e))}`)),d=JSON.stringify({sender:a,arguments:l}),h=await c.fetchFn(u,{method:"POST",body:d,headers:{"Content-Type":"application/json"}});if(!h.ok){const e=await h.text().catch((()=>""));throw new Error(`Error calling read-only function. Response ${h.status}: ${h.statusText}. Attempted to fetch ${u} and failed with the message: "${e}"`)}return h.json().then((e=>vo(e)))}function Js(){const e=function(){const e=document.createElement("form");e.name="newProject";const t=document.createElement("p");e.appendChild(t);const n=document.createElement("label");n.className=e.name,n.textContent="Project name: ",n.setAttribute("for","inputProjectName"),t.appendChild(n);const r=document.createElement("input");r.className=e.name,r.type="text",r.id="inputProjectName",r.value="myNewProject",t.appendChild(r);const o=document.createElement("p");e.appendChild(o);const s=document.createElement("label");s.className=e.name,s.textContent="Description: ",s.setAttribute("for","inputProjectDescr"),o.appendChild(s);const i=document.createElement("input");i.className=e.name,i.type="text",i.id="inputProjectDescr",i.value="this is my new project",o.appendChild(i);const a=document.createElement("p");e.appendChild(a);const c=document.createElement("label");c.className=e.name,c.textContent="Website:",c.setAttribute("for","inputProjectLink"),a.appendChild(c);const u=document.createElement("input");u.className=e.name,u.type="url",u.id="inputProjectLink",u.value="https://orckings.org/",a.appendChild(u);const l=document.createElement("p");e.appendChild(l);const d=document.createElement("label");d.className=e.name,d.textContent="Goal [STX]: ",d.setAttribute("for","inputProjectGoal"),l.appendChild(d);const h=document.createElement("input");h.className=e.name,h.type="number",h.id="inputProjectGoal",h.value=1e4,l.appendChild(h);const f=document.createElement("p");e.appendChild(f);const p=document.createElement("label");p.className=e.name,p.textContent="Duration days: ",p.setAttribute("for","inputProjectDuration"),f.appendChild(p);const y=document.createElement("input");y.className=e.name,y.type="number",y.id="inputProjectDuration",y.value=30,f.appendChild(y);const g=document.createElement("p");e.appendChild(g);const m=document.createElement("button");m.className=e.name,m.type="submit",m.textContent="Create project",g.appendChild(m);const w=document.createElement("button");return w.className=e.name,w.textContent="back",g.appendChild(w),e}();document.body.appendChild(e);const t=e.elements[0];t.focus();const n=e.elements[1],r=e.elements[2],o=e.elements[3],s=e.elements[4],i=e.elements[5],a=e.elements[6];i.addEventListener("click",(async i=>{i.preventDefault();let a=0;await li().then((e=>{a=e}));const c=a+BigInt(3),u=c+BigInt(144*s.value);await oi(t.value,n.value,r.value,o.value,c,u),e.remove(),ri()})),a.addEventListener("click",(()=>{e.remove(),ri()}))}function Xs(e){const t=function(){const e=document.createElement("form");e.name="Invest";const t=document.createElement("p");e.appendChild(t);const n=document.createElement("label");n.className=e.name,n.textContent="Amount: ",n.setAttribute("for","inputInvestAmount"),t.appendChild(n);const r=document.createElement("input");r.className=e.name,r.type="number",r.id="inputInvestAmount",r.value=10,t.appendChild(r);const o=document.createElement("p");e.appendChild(o);const s=document.createElement("button");s.className=e.name,s.type="submit",s.textContent="invest",o.appendChild(s);const i=document.createElement("button");return i.className=e.name,i.textContent="back",o.appendChild(i),e}();document.body.appendChild(t);const n=t.elements[0];n.focus();const r=t.elements[1],o=t.elements[2];r.addEventListener("click",(async()=>{event.preventDefault(),await ii(e,n.value),t.remove(),ri()})),o.addEventListener("click",(()=>{t.remove(),ri()}))}function Ys(e){const t=function(){const e=document.createElement("form");e.name="mint nft";const t=document.createElement("p");e.appendChild(t);const n=document.createElement("label");n.className=e.name,n.textContent="nft name: ",n.setAttribute("for","inputNftName"),t.appendChild(n);const r=document.createElement("input");r.className=e.name,r.type="text",r.id="inputNftName",r.value="cool music nft",t.appendChild(r);const o=document.createElement("p");e.appendChild(o);const s=document.createElement("button");s.className=e.name,s.type="submit",s.textContent="mint nft",o.appendChild(s);const i=document.createElement("button");return i.className=e.name,i.textContent="back",o.appendChild(i),e}();document.body.appendChild(t);const n=t.elements[0];n.focus();const r=t.elements[1],o=t.elements[2];r.addEventListener("click",(async()=>{event.preventDefault(),await ai(e,n.value),t.remove(),ri()})),o.addEventListener("click",(()=>{t.remove(),ri()}))}function Zs(e,t,n){const r=function(){const e=document.createElement("form");e.name="update uri";const t=document.createElement("p");e.appendChild(t);const n=document.createElement("label");n.className=e.name,n.textContent="new uri: ",n.setAttribute("for","inputNewUri"),t.appendChild(n);const r=document.createElement("input");r.className=e.name,r.type="text",r.id="inputNewUri",r.value="bafybeifzoemu4xt7sgwpzmnxjmrec2xtzxz7tqvzbf43yowmsffsu6fzqi",t.appendChild(r);const o=document.createElement("p");e.appendChild(o);const s=document.createElement("button");s.className=e.name,s.type="submit",s.textContent="update uri",o.appendChild(s);const i=document.createElement("button");return i.className=e.name,i.textContent="back",o.appendChild(i),e}();document.body.appendChild(r);const o=r.elements[0];o.focus();const s=r.elements[1],i=r.elements[2];s.addEventListener("click",(async()=>{event.preventDefault(),await ci(e,o.value),r.remove(),ei(t)})),i.addEventListener("click",(()=>{r.remove(),ei(t)}))}function Qs(e,t,n){const r=document.createElement("p"),o=document.createElement("label");o.textContent="nft name: ",o.setAttribute("for","inputNftName"),r.appendChild(o);const s=document.createElement("input");s.disabled=!0,s.type="text",s.id="inputNftName",s.value=n,r.appendChild(s);const i=document.createElement("button");if(i.id=t,i.textContent="download",r.appendChild(i),$i.userStxAddress===$i.projectList[e-1][1].campaignOwner||$i.userStxAddress===$i.deployerStxAddress){const e=document.createElement("button");e.id=t,e.textContent="update uri",r.appendChild(e)}return r}function ei(e){const t=document.createElement("p");t.id="listPara",document.body.appendChild(t);const n=$i.projectList[e-1][2];console.log(`in showNftComponent: projectId ${e} :`),console.log(n);for(const r of n){const n=r.projectNftId,o=r.nft.name,s=Qs(e,n,o);t.appendChild(s)}t.addEventListener("click",(async function(r){if(console.log("in showNftComponent:"),console.log(r.target.tagName),"BUTTON"===r.target.tagName)if("download"===r.target.textContent){const t=n[r.target.id-1].nft.id,o=`${n[r.target.id-1].nft.name}`;await ui(t,e,o)}else if("update uri"===r.target.textContent){t.remove();Zs(n[r.target.id-1].nft.id,e,$i.projectList)}}),!1);const r=document.createElement("button");r.textContent="back",t.appendChild(r),r.addEventListener("click",(()=>{t.remove(),ri()}))}function ti(e,t,n){const r=document.createElement("p"),o=document.createElement("button");o.id=t,o.textContent="Invest",e<n.startsAt.value&&(o.disabled=!0),e>n.endsAt.value-BigInt(1)&&(n.targetReached&&$i.userStxAddress===n.campaignOwner&&!n.claimed?o.textContent="Claim":n.claimed?(o.textContent="Claimed",o.disabled=!0):o.disabled=!0),r.appendChild(o);const s=document.createElement("a");s.textContent=n.title.data,s.href=n.link.data,s.target="_blank",r.appendChild(s);const i=document.createElement("button");i.disabled=!0,i.textContent=Number(n.pledgedAmount.value)/1e6,r.appendChild(i);const a=document.createElement("button");if(a.disabled=!0,a.textContent=n.fundGoal.value,r.appendChild(a),$i.userStxAddress===n.campaignOwner||$i.userStxAddress===$i.deployerStxAddress){const e=document.createElement("button");e.id=t,e.textContent="Mint Nft",r.appendChild(e)}if(0!=n.nftCounter.value){const e=document.createElement("button");e.id=t,e.textContent="Show Nfts",r.appendChild(e)}const c=document.createElement("div");return c.textContent="No description available",""!=n.description&&(c.textContent=n.description),r.appendChild(c),r}async function ni(){if(document.getElementById("listHeader")){let e=0;await li().then((t=>{e=t}));const t=[];for(const e of $i.projectList)t.push(e);if(document.getElementById("listPara")){document.getElementById("listPara").remove()}const n=document.getElementById("listHeader"),r=document.createElement("p");if(r.id="listPara",n.appendChild(r),0!=t.length){console.log("renderProjectList...");for(const n of t){const t=n[0],o=n[1],s=ti(e,t,o);r.appendChild(s)}}else console.log("empty project list")}else console.log("no projectList active")}async function ri(){const e=document.createElement("div"),t=document.getElementById("appDiv");e.id="listHeader",t.appendChild(e);const n=document.getElementById("navDiv"),r=document.createElement("button");r.id="newProjectBtn",r.textContent="new Project",r.addEventListener("click",(()=>{document.getElementById("listHeader").remove(),r.remove(),Js()})),e.addEventListener("click",(function(t){console.log("in handleListDivCLicks:"),console.log(t.target.tagName),"BUTTON"===t.target.tagName&&("Invest"===t.target.textContent?(e.remove(),r.remove(),Xs(t.target.id)):"Claim"===t.target.textContent?(e.remove(),r.remove(),si(t.target.id)):"Mint Nft"===t.target.textContent?(e.remove(),r.remove(),Ys(t.target.id)):"Show Nfts"===t.target.textContent&&(e.remove(),r.remove(),ei(t.target.id)))})),n.appendChild(r);const o=document.createElement("p");o.id="headerpara";const s=document.createElement("button");s.textContent="Invest:",s.disabled=!0,o.appendChild(s);const i=document.createElement("button");i.disabled=!0,i.textContent="Link to project:",o.appendChild(i);const a=document.createElement("button");a.disabled=!0,a.textContent="Funded:",o.appendChild(a);const c=document.createElement("button");c.disabled=!0,c.textContent="Goal:",o.appendChild(c);const u=document.createElement("button");u.disabled=!0,u.textContent=" Projects nfts:",o.appendChild(u),e.appendChild(o),ni()}async function oi(e,t,n,r,o,s){const i=[Ws($i.userStxAddress,In.LessEqual,1e8)],a={contractAddress:$i.deployerStxAddress,contractName:"prt",functionName:"launch",functionArgs:[io(e),Jn(t),io(n),hr(r),hr(o),hr(s)],network:$i.network,postConditions:i,appDetails:{name:"PRT",icon:window.location.origin+"/my-app-logo.svg"},onFinish:e=>{Ti(e)}};await Ds(a)}async function si(e){const t=$i.projectList[e-1][1].pledgedAmount.value;console.log("in claimFunds funds:"),console.log($i),console.log(t);const n=$i.userStxAddress,r=In.LessEqual,o=t,s=$i.deployerStxAddress,i=[Ws(n,r,o),qs(s,"prt",r,o)],a={contractAddress:$i.deployerStxAddress,contractName:"prt",functionName:"claim",functionArgs:[hr(e)],validateWithAbi:!0,network:$i.network,postConditions:i,AnchorMode:fn.Any,appDetails:{name:"PRT",icon:window.location.origin+"/my-app-logo.svg"},onFinish:e=>{Ti(e)}};await Ds(a).then((()=>{ri()}))}async function ii(e,t){const n=[Ws($i.userStxAddress,In.LessEqual,1e6*t)],r={contractAddress:$i.deployerStxAddress,contractName:"prt",functionName:"pledge",functionArgs:[hr(e),hr(1e6*t)],validateWithAbi:!0,network:$i.network,postConditions:n,AnchorMode:fn.Any,appDetails:{name:"PRT",icon:window.location.origin+"/my-app-logo.svg"},onFinish:e=>{Ti(e)}};await Ds(r)}async function ai(e,t){const n={contractAddress:$i.deployerStxAddress,contractName:"prt",functionName:"mintNft",functionArgs:[hr(e),so(t)],validateWithAbi:!0,network:$i.network,AnchorMode:fn.Any,appDetails:{name:"PRT",icon:window.location.origin+"/my-app-logo.svg"},onFinish:e=>{Ti(e)}};await Ds(n)}async function ci(e,t){const n={contractAddress:$i.deployerStxAddress,contractName:"musicnfts",functionName:"update-token-uri",functionArgs:[hr(e),so(t)],validateWithAbi:!0,network:$i.network,AnchorMode:fn.Any,appDetails:{name:"PRT",icon:window.location.origin+"/my-app-logo.svg"},onFinish:e=>{Ti(e)}};await Ds(n)}async function ui(e,t,n){let r;await async function(){const e=$i.deployerStxAddress,t="prt",n="get-price",r=[],o=$i.deployerStxAddress,s={contractAddress:e,contractName:t,functionName:n,functionArgs:r,network:$i.network,senderAddress:o},i=await Gs(s);return Number(i.value.value)}().then((e=>{r=1e6*e}));const o=[Ws($i.userStxAddress,In.LessEqual,r)],s={contractAddress:$i.deployerStxAddress,contractName:"prt",functionName:"download",functionArgs:[hr(e),hr(t)],validateWithAbi:!0,network:$i.network,postConditions:o,AnchorMode:fn.Any,appDetails:{name:"PRT",icon:window.location.origin+"/my-app-logo.svg"},onFinish:t=>{Ti(t),async function(e){const t=$i.deployerStxAddress,n="musicnfts",r="get-token-uri",o=[hr(e)],s=$i.deployerStxAddress,i={contractAddress:t,contractName:n,functionName:r,functionArgs:o,network:$i.network,senderAddress:s},a=await Gs(i);return a.value.value.data}(e).then((e=>{!function(e,t){const n=new Request(`https://${e}.ipfs.dweb.link/favicon.ico`);fetch(n).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.blob()})).then((e=>{const t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="favicon.ico",document.body.appendChild(n),n.click(),n.remove()}))}(e)}))}};await Ds(s)}async function li(){const e=$i.deployerStxAddress,t=$i.deployerStxAddress,n={contractAddress:e,contractName:"prt",functionName:"get-blockHeight",functionArgs:[],network:$i.network,senderAddress:t};return(await Gs(n)).value.value}async function di(){const e=$i.deployerStxAddress,t=$i.deployerStxAddress,n={contractAddress:e,contractName:"prt",functionName:"get-lastId",functionArgs:[],network:$i.network,senderAddress:t};return(await Gs(n)).value.value}async function hi(e){const t=$i.deployerStxAddress,n=[hr(e)],r=$i.deployerStxAddress,o={contractAddress:t,contractName:"prt",functionName:"get-campaign",functionArgs:n,network:$i.network,senderAddress:r};return(await Gs(o)).value.data}async function fi(e,t){const n=$i.deployerStxAddress,r=[hr(e),hr(t)],o=$i.deployerStxAddress,s={contractAddress:n,contractName:"prt",functionName:"get-projectNft",functionArgs:r,network:$i.network,senderAddress:o};return(await Gs(s)).value.value.data}async function pi(e){let t=0;const n=`/extended/v1/address/${e}/stx`;const r=$i.baseUri+n;return await fetch(r).then((e=>e.json())).then((e=>{t=e.balance})),t}async function yi(e){const t=`${$i.network.coreApiUrl}/extended/v1/tx/${e}`,n=new Request(t);let r;return await fetch(n).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>{r=e.tx_status})),r}me=u("6XnWx"),$e=u("3Bcdj"),$e=u("3Bcdj");const gi="0123456789ABCDEFGHJKMNPQRSTVWXYZ",mi="0123456789abcdef";function wi(e,t){if(!e.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");e.length%2!=0&&(e=`0${e}`);let n=[],r=0;for(let t=(e=e.toLowerCase()).length-1;t>=0;t--)if(r<4){const o=mi.indexOf(e[t])>>r;let s=0;0!==t&&(s=mi.indexOf(e[t-1]));const i=1+r,a=gi[o+(s%(1<<i)<<5-i)];r=i,n.unshift(a)}else r=0;let o=0;for(let e=0;e<n.length&&"0"===n[e];e++)o++;n=n.slice(o);const s=(new TextDecoder).decode((0,$e.hexToBytes)(e)).match(/^\u0000*/),i=s?s[0].length:0;for(let e=0;e<i;e++)n.unshift(gi[0]);if(t){const e=t-n.length;for(let t=0;t<e;t++)n.unshift(gi[0])}return n.join("")}function bi(e){const t=(0,me.sha256)((0,me.sha256)((0,$e.hexToBytes)(e)));return(0,$e.bytesToHex)(t.slice(0,4))}function vi(e,t){if(e<0||e>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!t.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");(t=t.toLowerCase()).length%2!=0&&(t=`0${t}`);let n=e.toString(16);1===n.length&&(n=`0${n}`);const r=wi(`${t}${bi(`${n}${t}`)}`);return`${gi[e]}${r}`}me=u("6XnWx"),$e=u("3Bcdj");$e=u("3Bcdj");const xi={p2pkh:22,p2sh:20},Ei={p2pkh:26,p2sh:21},Si={};Si[0]=xi.p2pkh,Si[5]=xi.p2sh,Si[111]=Ei.p2pkh,Si[196]=Ei.p2sh;const Ai={};function Ci(e,t){if(!t.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${vi(e,t)}`}Ai[xi.p2pkh]=0,Ai[xi.p2sh]=5,Ai[Ei.p2pkh]=111,Ai[Ei.p2sh]=196;const $i={state:"start",projectList:[],txDataLog:[],periodics:[],userStxAddress:"",deployerStxAddress:"",environment:"testnet",network:{},apiBaseUri:""};function Ti(e){$i.txDataLog.length>10?($i.txDataLog.shift(),$i.txDataLog.push(e)):$i.txDataLog.push(e)}function ki(){async function e(){console.log("updating project list...");const e=await di(),t=[];for(let n=1;n<=Number(e);n++){let e=[];await hi(n).then((t=>{t.description=z(t.description.buffer);const r=Ci(t.campaignOwner.address.version,t.campaignOwner.address.hash160);t.campaignOwner=r,3===t.targetReached.type?t.targetReached=!0:t.targetReached=!1,3===t.claimed.type?t.claimed=!0:t.claimed=!1,t&&(e=[n,t,[]])}));const r=e[1].nftCounter.value;for(let t=1;t<=Number(r);t++)await fi(n,t).then((n=>{n&&e[2].push({projectNftId:t,nft:{id:n.nftId.value,name:n.nftName.data}})}));t.push(e)}$i.projectList=t,ni()}async function t(){if(console.log("in checkTxData():"),$i.txDataLog.length>0){const t=$i.txDataLog,n=t.length-1;for(let r=0;r<=n;r++){const n=t.shift(),r=n.txId;await yi(r).then((o=>{const s=o;if(console.log(s),"pending"===s)t.push(n);else if("success"===s)e();else{const e=`localhost:8000/txid/${r}?chain=testnet&api=http://localhost:3999`;window.alert(`transaction failed: don't panic!\n                                        NO funds will be lost ( except fees ), \n                                        please check stacks explorer for details: \n                                        ${e}`)}}))}}}const n=document.createElement("div");n.id="appDiv",document.body.appendChild(n);const r=document.createElement("div");r.id="navDiv",n.appendChild(r);const o=document.createElement("button");o.id="connectBtn",o.textContent="Connect",r.appendChild(o);o.addEventListener("click",(function(){var n;e(),$i.periodics.push({name:"idUpdateProjectList",id:setInterval(e,3e5)}),$i.periodics.push({name:"idCheckTxData",id:setInterval(t,6e4)}),o.remove(),n=Pi,Hs({userSession:Fs,appDetails:{name:"ProjectRoundTable",icon:"./my_logo.png"},onFinish:()=>{console.log("connected");const e=Fs.loadUserData();$i.userStxAddress=e.profile.stxAddress.testnet,$i.state="loggedIn",console.log($i.state),n()},onCancel:()=>{console.log("Connecting cancelled by user"),ki()}})}),!1),console.log($i.network)}function Pi(){const e=document.createElement("div");async function t(){await pi($i.userStxAddress).then((t=>{console.log("checking user balance...");const n=t/1e6;e.textContent=`Balance ${n.toString()}STX`}))}t(),"loggedIn"===$i.state&&$i.periodics.push({name:"idUpdateBalance",id:setInterval(t,3e4)}),"loggedIn"===$i.state&&$i.periodics.push({name:"idrenderProjectList",id:setInterval(ni,3e5)});const n=document.createElement("button");n.id="signOutBtn",n.textContent="Sign out",n.addEventListener("click",(()=>{let e=document.body.firstChild;for(;e;)document.body.removeChild(document.body.firstChild),e=document.body.firstChild;for(const e of $i.periodics)clearInterval(e.id);Fs.signUserOut(),Fs.isUserSignedIn()||($i.state="signedOut",console.log("signed out")),ki()}));const r=document.getElementById("navDiv");r.appendChild(n),r.appendChild(e),ri()}"mainnet"===$i.environment?($i.network=new m,$i.baseUri="https://api.mainnet.hiro.so"):"devnet"===$i.environment?($i.network=new b,$i.baseUri="http://localhost:3999",$i.deployerStxAddress="ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM"):($i.network=new w,$i.baseUri="https://api.testnet.hiro.so",$i.deployerStxAddress="ST1YT40RFHKSYXM69KS1Q7BGEH0RBJ7H1RKDN1WX"),ki();
//# sourceMappingURL=index.e097d325.js.map
